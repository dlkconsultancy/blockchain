17:50:20 - [32minfo[39m: Using current directory as template folder
17:50:20 - [32minfo[39m: Loading a default sample.txt file.
17:50:21 - [34mdebug[39m: fromDirectory
17:50:21 - [34mdebug[39m: fromDirectory
17:50:21 - [34mdebug[39m: fromDirectory
17:50:21 - [34mdebug[39m: fromDirectory
17:50:21 - [34mdebug[39m: fromDirectory
17:50:21 - [34mdebug[39m: fromDirectory
17:50:21 - [34mdebug[39m: fromDirectory
17:50:21 - [34mdebug[39m: constructor
17:50:21 - [34mdebug[39m: constructor
17:50:21 - [34mdebug[39m: isFileInNodeModuleDir
17:50:21 - [34mdebug[39m: isFileInNodeModuleDir
17:50:21 - [34mdebug[39m: isFileInNodeModuleDir
17:50:21 - [34mdebug[39m: isFileInNodeModuleDir
17:50:21 - [34mdebug[39m: processDirectory
17:50:21 - [34mdebug[39m: isFileInNodeModuleDir
17:50:21 - [34mdebug[39m: processFile
17:50:21 - [34mdebug[39m: isFileInNodeModuleDir
17:50:21 - [34mdebug[39m: processFile
17:50:21 - [34mdebug[39m: isFileInNodeModuleDir
17:50:21 - [34mdebug[39m: processFile
17:50:21 - [34mdebug[39m: isFileInNodeModuleDir
17:50:21 - [34mdebug[39m: processFile
17:50:21 - [34mdebug[39m: fromDirectory
17:50:21 - [34mdebug[39m: isFileInNodeModuleDir
17:50:21 - [34mdebug[39m: processFile
17:50:21 - [34mdebug[39m: isFileInNodeModuleDir
17:50:21 - [34mdebug[39m: processFile
17:50:21 - [34mdebug[39m: isFileInNodeModuleDir
17:50:21 - [34mdebug[39m: processFile
17:50:23 - [34mdebug[39m: fromDirectory
17:50:23 - [34mdebug[39m: isFileInNodeModuleDir
17:50:23 - [34mdebug[39m: isFileInNodeModuleDir
17:50:23 - [34mdebug[39m: isFileInNodeModuleDir
17:50:23 - [34mdebug[39m: isFileInNodeModuleDir
17:50:23 - [34mdebug[39m: processDirectory
17:50:23 - [34mdebug[39m: isFileInNodeModuleDir
17:50:23 - [34mdebug[39m: processFile
17:50:23 - [34mdebug[39m: isFileInNodeModuleDir
17:50:23 - [34mdebug[39m: processFile
17:50:23 - [34mdebug[39m: isFileInNodeModuleDir
17:50:23 - [34mdebug[39m: processFile
17:50:23 - [34mdebug[39m: fromDirectory
17:50:23 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "confirmation")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "confirmation")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



17:50:23 - [34mdebug[39m: fromDirectory
17:50:23 - [34mdebug[39m: isFileInNodeModuleDir
17:50:23 - [34mdebug[39m: processFile
17:50:23 - [34mdebug[39m: isFileInNodeModuleDir
17:50:23 - [34mdebug[39m: processFile
17:50:23 - [34mdebug[39m: isFileInNodeModuleDir
17:50:23 - [34mdebug[39m: processFile
17:50:23 - [34mdebug[39m: isFileInNodeModuleDir
17:50:23 - [34mdebug[39m: processFile
17:50:23 - [34mdebug[39m: isFileInNodeModuleDir
17:50:23 - [34mdebug[39m: processFile
17:50:23 - [34mdebug[39m: fromDirectory
17:50:23 - [34mdebug[39m: buildGrammar
17:50:23 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
17:50:23 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
17:50:23 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
17:50:23 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
17:50:23 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
17:50:23 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
17:50:23 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
17:50:23 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
17:50:23 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
17:50:23 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
17:50:23 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
17:50:23 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
17:50:23 - [31merror[39m: Template references a property 'mahkemebolge' that is not declared in the template model 'org.example.satisozlesmesi.satisozlesmesi'. Details: {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
Error: Template references a property 'mahkemebolge' that is not declared in the template model 'org.example.satisozlesmesi.satisozlesmesi'. Details: {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
    at Template.buildGrammarRules (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:285:31)
    at Template.buildGrammar (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:191:14)
    at template.getModelManager.updateExternalModels.then (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:1016:26)
    at process._tickCallback (internal/process/next_tick.js:68:7)
17:50:23 - [32minfo[39m: undefined
17:51:26 - [32minfo[39m: Using current directory as template folder
17:51:26 - [32minfo[39m: Loading a default sample.txt file.
17:51:26 - [34mdebug[39m: fromDirectory
17:51:26 - [34mdebug[39m: fromDirectory
17:51:26 - [34mdebug[39m: fromDirectory
17:51:26 - [34mdebug[39m: fromDirectory
17:51:26 - [34mdebug[39m: fromDirectory
17:51:26 - [34mdebug[39m: fromDirectory
17:51:26 - [34mdebug[39m: fromDirectory
17:51:26 - [34mdebug[39m: constructor
17:51:26 - [34mdebug[39m: constructor
17:51:26 - [34mdebug[39m: isFileInNodeModuleDir
17:51:26 - [34mdebug[39m: isFileInNodeModuleDir
17:51:26 - [34mdebug[39m: isFileInNodeModuleDir
17:51:26 - [34mdebug[39m: isFileInNodeModuleDir
17:51:26 - [34mdebug[39m: processDirectory
17:51:26 - [34mdebug[39m: isFileInNodeModuleDir
17:51:26 - [34mdebug[39m: processFile
17:51:26 - [34mdebug[39m: isFileInNodeModuleDir
17:51:26 - [34mdebug[39m: processFile
17:51:26 - [34mdebug[39m: isFileInNodeModuleDir
17:51:26 - [34mdebug[39m: processFile
17:51:26 - [34mdebug[39m: isFileInNodeModuleDir
17:51:26 - [34mdebug[39m: processFile
17:51:26 - [34mdebug[39m: isFileInNodeModuleDir
17:51:26 - [34mdebug[39m: processFile
17:51:26 - [34mdebug[39m: fromDirectory
17:51:26 - [34mdebug[39m: isFileInNodeModuleDir
17:51:26 - [34mdebug[39m: processFile
17:51:26 - [34mdebug[39m: isFileInNodeModuleDir
17:51:26 - [34mdebug[39m: processFile
17:51:26 - [34mdebug[39m: isFileInNodeModuleDir
17:51:26 - [34mdebug[39m: processFile
17:51:32 - [34mdebug[39m: fromDirectory
17:51:32 - [34mdebug[39m: isFileInNodeModuleDir
17:51:32 - [34mdebug[39m: isFileInNodeModuleDir
17:51:32 - [34mdebug[39m: isFileInNodeModuleDir
17:51:32 - [34mdebug[39m: isFileInNodeModuleDir
17:51:32 - [34mdebug[39m: processDirectory
17:51:32 - [34mdebug[39m: isFileInNodeModuleDir
17:51:32 - [34mdebug[39m: processFile
17:51:32 - [34mdebug[39m: isFileInNodeModuleDir
17:51:32 - [34mdebug[39m: processFile
17:51:32 - [34mdebug[39m: isFileInNodeModuleDir
17:51:32 - [34mdebug[39m: processFile
17:51:32 - [34mdebug[39m: fromDirectory
17:51:32 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "confirmation")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "confirmation")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



17:51:32 - [34mdebug[39m: fromDirectory
17:51:32 - [34mdebug[39m: isFileInNodeModuleDir
17:51:32 - [34mdebug[39m: processFile
17:51:32 - [34mdebug[39m: isFileInNodeModuleDir
17:51:32 - [34mdebug[39m: processFile
17:51:32 - [34mdebug[39m: isFileInNodeModuleDir
17:51:32 - [34mdebug[39m: processFile
17:51:32 - [34mdebug[39m: isFileInNodeModuleDir
17:51:32 - [34mdebug[39m: processFile
17:51:32 - [34mdebug[39m: isFileInNodeModuleDir
17:51:32 - [34mdebug[39m: processFile
17:51:32 - [34mdebug[39m: fromDirectory
17:51:32 - [34mdebug[39m: buildGrammar
17:51:32 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
17:51:32 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
17:51:32 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
17:51:32 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
17:51:32 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
17:51:32 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
17:51:32 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
17:51:32 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
17:51:32 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
17:51:32 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
17:51:32 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
17:51:32 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
17:51:32 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        contractId : "ed38b57c-6c9d-478f-9212-2104878a3f0d",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satisozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
17:51:32 - [34mdebug[39m: fromDirectory
17:51:32 - [34mdebug[39m: fromDirectory
17:51:32 - [31merror[39m: invalid syntax at line 6 col 18:

              1.1  [{CANYAZI DİL EĞİTİM MERKEZİ}] (Bundan sonra ALICI olarak anılacaktır)
                   ^
Unexpected "["

Error: invalid syntax at line 6 col 18:

              1.1  [{CANYAZI DİL EĞİTİM MERKEZİ}] (Bundan sonra ALICI olarak anılacaktır)
                   ^
Unexpected "["

    at Parser.feed (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/nearley/lib/nearley.js:317:27)
    at Clause.parse (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/templateinstance.js:96:16)
    at Template.fromDirectory.then (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/lib/commands.js:54:24)
    at process._tickCallback (internal/process/next_tick.js:68:7)
17:51:32 - [32minfo[39m: undefined
17:52:04 - [32minfo[39m: Using current directory as template folder
17:52:04 - [32minfo[39m: Loading a default sample.txt file.
17:52:04 - [32minfo[39m: Loading a single default request.json file.
17:52:04 - [32minfo[39m: Loading a default state.json file.
17:52:04 - [33mwarn[39m: A state file was not provided, generating default state object. Try the --state flag or create a state.json in the root folder of your template.
17:52:04 - [34mdebug[39m: fromDirectory
17:52:04 - [34mdebug[39m: fromDirectory
17:52:04 - [34mdebug[39m: fromDirectory
17:52:04 - [34mdebug[39m: fromDirectory
17:52:04 - [34mdebug[39m: fromDirectory
17:52:04 - [34mdebug[39m: fromDirectory
17:52:04 - [34mdebug[39m: fromDirectory
17:52:04 - [34mdebug[39m: constructor
17:52:04 - [34mdebug[39m: constructor
17:52:04 - [34mdebug[39m: isFileInNodeModuleDir
17:52:04 - [34mdebug[39m: isFileInNodeModuleDir
17:52:04 - [34mdebug[39m: isFileInNodeModuleDir
17:52:04 - [34mdebug[39m: isFileInNodeModuleDir
17:52:04 - [34mdebug[39m: processDirectory
17:52:04 - [34mdebug[39m: isFileInNodeModuleDir
17:52:04 - [34mdebug[39m: processFile
17:52:04 - [34mdebug[39m: isFileInNodeModuleDir
17:52:04 - [34mdebug[39m: processFile
17:52:04 - [34mdebug[39m: isFileInNodeModuleDir
17:52:04 - [34mdebug[39m: processFile
17:52:04 - [34mdebug[39m: isFileInNodeModuleDir
17:52:04 - [34mdebug[39m: processFile
17:52:04 - [34mdebug[39m: isFileInNodeModuleDir
17:52:04 - [34mdebug[39m: processFile
17:52:04 - [34mdebug[39m: fromDirectory
17:52:04 - [34mdebug[39m: isFileInNodeModuleDir
17:52:04 - [34mdebug[39m: processFile
17:52:04 - [34mdebug[39m: isFileInNodeModuleDir
17:52:04 - [34mdebug[39m: processFile
17:52:04 - [34mdebug[39m: isFileInNodeModuleDir
17:52:04 - [34mdebug[39m: processFile
17:52:06 - [34mdebug[39m: fromDirectory
17:52:06 - [34mdebug[39m: isFileInNodeModuleDir
17:52:06 - [34mdebug[39m: isFileInNodeModuleDir
17:52:06 - [34mdebug[39m: isFileInNodeModuleDir
17:52:06 - [34mdebug[39m: isFileInNodeModuleDir
17:52:06 - [34mdebug[39m: processDirectory
17:52:06 - [34mdebug[39m: isFileInNodeModuleDir
17:52:06 - [34mdebug[39m: processFile
17:52:06 - [34mdebug[39m: isFileInNodeModuleDir
17:52:06 - [34mdebug[39m: processFile
17:52:06 - [34mdebug[39m: isFileInNodeModuleDir
17:52:06 - [34mdebug[39m: processFile
17:52:06 - [34mdebug[39m: fromDirectory
17:52:06 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "confirmation")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "confirmation")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



17:52:06 - [34mdebug[39m: fromDirectory
17:52:06 - [34mdebug[39m: isFileInNodeModuleDir
17:52:06 - [34mdebug[39m: processFile
17:52:06 - [34mdebug[39m: isFileInNodeModuleDir
17:52:06 - [34mdebug[39m: processFile
17:52:06 - [34mdebug[39m: isFileInNodeModuleDir
17:52:06 - [34mdebug[39m: processFile
17:52:06 - [34mdebug[39m: isFileInNodeModuleDir
17:52:06 - [34mdebug[39m: processFile
17:52:06 - [34mdebug[39m: isFileInNodeModuleDir
17:52:06 - [34mdebug[39m: processFile
17:52:06 - [34mdebug[39m: fromDirectory
17:52:06 - [34mdebug[39m: buildGrammar
17:52:06 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
17:52:06 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
17:52:06 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
17:52:06 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
17:52:06 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
17:52:06 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
17:52:06 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
17:52:06 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
17:52:06 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
17:52:06 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
17:52:06 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
17:52:06 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
17:52:06 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        contractId : "90fb845a-0164-4295-8ddd-702c2d8132f8",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satisozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
17:52:07 - [34mdebug[39m: fromDirectory
17:52:07 - [34mdebug[39m: fromDirectory
17:52:07 - [31merror[39m: invalid syntax at line 6 col 18:

              1.1  [{CANYAZI DİL EĞİTİM MERKEZİ}] (Bundan sonra ALICI olarak anılacaktır)
                   ^
Unexpected "["

Error: invalid syntax at line 6 col 18:

              1.1  [{CANYAZI DİL EĞİTİM MERKEZİ}] (Bundan sonra ALICI olarak anılacaktır)
                   ^
Unexpected "["

    at Parser.feed (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/nearley/lib/nearley.js:317:27)
    at Clause.parse (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/templateinstance.js:96:16)
    at Template.fromDirectory.then (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/lib/commands.js:147:24)
    at process._tickCallback (internal/process/next_tick.js:68:7)
17:52:07 - [32minfo[39m: undefined
17:56:12 - [32minfo[39m: Using current directory as template folder
17:56:12 - [32minfo[39m: Loading a default sample.txt file.
17:56:12 - [34mdebug[39m: fromDirectory
17:56:12 - [34mdebug[39m: fromDirectory
17:56:12 - [34mdebug[39m: fromDirectory
17:56:12 - [34mdebug[39m: fromDirectory
17:56:12 - [34mdebug[39m: fromDirectory
17:56:12 - [34mdebug[39m: fromDirectory
17:56:12 - [34mdebug[39m: fromDirectory
17:56:12 - [34mdebug[39m: constructor
17:56:12 - [34mdebug[39m: constructor
17:56:12 - [34mdebug[39m: isFileInNodeModuleDir
17:56:12 - [34mdebug[39m: isFileInNodeModuleDir
17:56:12 - [34mdebug[39m: isFileInNodeModuleDir
17:56:12 - [34mdebug[39m: isFileInNodeModuleDir
17:56:12 - [34mdebug[39m: processDirectory
17:56:12 - [34mdebug[39m: isFileInNodeModuleDir
17:56:12 - [34mdebug[39m: processFile
17:56:12 - [34mdebug[39m: isFileInNodeModuleDir
17:56:12 - [34mdebug[39m: processFile
17:56:12 - [34mdebug[39m: isFileInNodeModuleDir
17:56:12 - [34mdebug[39m: processFile
17:56:12 - [34mdebug[39m: isFileInNodeModuleDir
17:56:12 - [34mdebug[39m: processFile
17:56:12 - [34mdebug[39m: isFileInNodeModuleDir
17:56:12 - [34mdebug[39m: processFile
17:56:12 - [34mdebug[39m: fromDirectory
17:56:12 - [34mdebug[39m: isFileInNodeModuleDir
17:56:12 - [34mdebug[39m: processFile
17:56:12 - [34mdebug[39m: isFileInNodeModuleDir
17:56:12 - [34mdebug[39m: processFile
17:56:12 - [34mdebug[39m: isFileInNodeModuleDir
17:56:12 - [34mdebug[39m: processFile
17:56:15 - [34mdebug[39m: fromDirectory
17:56:15 - [34mdebug[39m: isFileInNodeModuleDir
17:56:15 - [34mdebug[39m: isFileInNodeModuleDir
17:56:15 - [34mdebug[39m: isFileInNodeModuleDir
17:56:15 - [34mdebug[39m: isFileInNodeModuleDir
17:56:15 - [34mdebug[39m: processDirectory
17:56:15 - [34mdebug[39m: isFileInNodeModuleDir
17:56:15 - [34mdebug[39m: processFile
17:56:15 - [34mdebug[39m: isFileInNodeModuleDir
17:56:15 - [34mdebug[39m: processFile
17:56:15 - [34mdebug[39m: isFileInNodeModuleDir
17:56:15 - [34mdebug[39m: processFile
17:56:15 - [34mdebug[39m: fromDirectory
17:56:15 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "confirmation")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "confirmation")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



17:56:15 - [34mdebug[39m: fromDirectory
17:56:15 - [34mdebug[39m: isFileInNodeModuleDir
17:56:15 - [34mdebug[39m: processFile
17:56:15 - [34mdebug[39m: isFileInNodeModuleDir
17:56:15 - [34mdebug[39m: processFile
17:56:15 - [34mdebug[39m: isFileInNodeModuleDir
17:56:15 - [34mdebug[39m: processFile
17:56:15 - [34mdebug[39m: isFileInNodeModuleDir
17:56:15 - [34mdebug[39m: processFile
17:56:15 - [34mdebug[39m: isFileInNodeModuleDir
17:56:15 - [34mdebug[39m: processFile
17:56:15 - [34mdebug[39m: fromDirectory
17:56:15 - [34mdebug[39m: buildGrammar
17:56:15 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
17:56:15 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
17:56:15 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
17:56:15 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
17:56:15 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
17:56:15 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
17:56:15 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
17:56:15 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
17:56:15 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
17:56:15 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
17:56:15 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
17:56:15 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
17:56:16 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        contractId : "312a425d-5f9f-40a9-bd06-091e0d5e20f2",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satisozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
17:56:16 - [34mdebug[39m: fromDirectory
17:56:16 - [34mdebug[39m: fromDirectory
17:56:16 - [31merror[39m: invalid syntax at line 6 col 18:

              1.1  [{canyazi}] (Bundan sonra ALICI olarak anılacaktır)
                   ^
Unexpected "["

Error: invalid syntax at line 6 col 18:

              1.1  [{canyazi}] (Bundan sonra ALICI olarak anılacaktır)
                   ^
Unexpected "["

    at Parser.feed (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/nearley/lib/nearley.js:317:27)
    at Clause.parse (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/templateinstance.js:96:16)
    at Template.fromDirectory.then (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/lib/commands.js:54:24)
    at process._tickCallback (internal/process/next_tick.js:68:7)
17:56:16 - [32minfo[39m: undefined
17:57:49 - [32minfo[39m: Using current directory as template folder
17:57:49 - [32minfo[39m: Loading a default sample.txt file.
17:57:49 - [34mdebug[39m: fromDirectory
17:57:49 - [34mdebug[39m: fromDirectory
17:57:49 - [34mdebug[39m: fromDirectory
17:57:49 - [34mdebug[39m: fromDirectory
17:57:49 - [34mdebug[39m: fromDirectory
17:57:49 - [34mdebug[39m: fromDirectory
17:57:49 - [34mdebug[39m: fromDirectory
17:57:49 - [34mdebug[39m: constructor
17:57:49 - [34mdebug[39m: constructor
17:57:49 - [34mdebug[39m: isFileInNodeModuleDir
17:57:49 - [34mdebug[39m: isFileInNodeModuleDir
17:57:49 - [34mdebug[39m: isFileInNodeModuleDir
17:57:49 - [34mdebug[39m: isFileInNodeModuleDir
17:57:49 - [34mdebug[39m: processDirectory
17:57:49 - [34mdebug[39m: isFileInNodeModuleDir
17:57:49 - [34mdebug[39m: processFile
17:57:49 - [34mdebug[39m: isFileInNodeModuleDir
17:57:49 - [34mdebug[39m: processFile
17:57:49 - [34mdebug[39m: isFileInNodeModuleDir
17:57:49 - [34mdebug[39m: processFile
17:57:49 - [34mdebug[39m: isFileInNodeModuleDir
17:57:49 - [34mdebug[39m: processFile
17:57:49 - [34mdebug[39m: isFileInNodeModuleDir
17:57:49 - [34mdebug[39m: processFile
17:57:49 - [34mdebug[39m: fromDirectory
17:57:49 - [34mdebug[39m: isFileInNodeModuleDir
17:57:49 - [34mdebug[39m: processFile
17:57:49 - [34mdebug[39m: isFileInNodeModuleDir
17:57:49 - [34mdebug[39m: processFile
17:57:49 - [34mdebug[39m: isFileInNodeModuleDir
17:57:49 - [34mdebug[39m: processFile
17:57:52 - [34mdebug[39m: fromDirectory
17:57:52 - [34mdebug[39m: isFileInNodeModuleDir
17:57:52 - [34mdebug[39m: isFileInNodeModuleDir
17:57:52 - [34mdebug[39m: isFileInNodeModuleDir
17:57:52 - [34mdebug[39m: isFileInNodeModuleDir
17:57:52 - [34mdebug[39m: processDirectory
17:57:52 - [34mdebug[39m: isFileInNodeModuleDir
17:57:52 - [34mdebug[39m: processFile
17:57:52 - [34mdebug[39m: isFileInNodeModuleDir
17:57:52 - [34mdebug[39m: processFile
17:57:52 - [34mdebug[39m: isFileInNodeModuleDir
17:57:52 - [34mdebug[39m: processFile
17:57:52 - [34mdebug[39m: fromDirectory
17:57:53 - [31merror[39m: In: /Users/umtyzc/cicero-template-library/turkishexample/lib/logic.ergo [At offset 834: unexpected character.
 at line 24 character 35]
Error: In: /Users/umtyzc/cicero-template-library/turkishexample/lib/logic.ergo [At offset 834: unexpected character.
 at line 24 character 35]
    at Object.process (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:969:35)
    at Function.processFile (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:1054:27)
    at items.forEach (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:1039:22)
    at Array.forEach (<anonymous>)
    at Function.processDirectory (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:1038:15)
    at template.getModelManager.updateExternalModels.then (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:945:22)
    at process._tickCallback (internal/process/next_tick.js:68:7)
17:57:53 - [32minfo[39m: undefined
17:58:00 - [32minfo[39m: Using current directory as template folder
17:58:00 - [32minfo[39m: Loading a default sample.txt file.
17:58:00 - [32minfo[39m: Loading a single default request.json file.
17:58:00 - [32minfo[39m: Loading a default state.json file.
17:58:00 - [33mwarn[39m: A state file was not provided, generating default state object. Try the --state flag or create a state.json in the root folder of your template.
17:58:00 - [34mdebug[39m: fromDirectory
17:58:00 - [34mdebug[39m: fromDirectory
17:58:00 - [34mdebug[39m: fromDirectory
17:58:00 - [34mdebug[39m: fromDirectory
17:58:00 - [34mdebug[39m: fromDirectory
17:58:00 - [34mdebug[39m: fromDirectory
17:58:00 - [34mdebug[39m: fromDirectory
17:58:00 - [34mdebug[39m: constructor
17:58:00 - [34mdebug[39m: constructor
17:58:00 - [34mdebug[39m: isFileInNodeModuleDir
17:58:00 - [34mdebug[39m: isFileInNodeModuleDir
17:58:00 - [34mdebug[39m: isFileInNodeModuleDir
17:58:00 - [34mdebug[39m: isFileInNodeModuleDir
17:58:00 - [34mdebug[39m: processDirectory
17:58:00 - [34mdebug[39m: isFileInNodeModuleDir
17:58:00 - [34mdebug[39m: processFile
17:58:00 - [34mdebug[39m: isFileInNodeModuleDir
17:58:00 - [34mdebug[39m: processFile
17:58:00 - [34mdebug[39m: isFileInNodeModuleDir
17:58:00 - [34mdebug[39m: processFile
17:58:00 - [34mdebug[39m: isFileInNodeModuleDir
17:58:00 - [34mdebug[39m: processFile
17:58:00 - [34mdebug[39m: isFileInNodeModuleDir
17:58:00 - [34mdebug[39m: processFile
17:58:00 - [34mdebug[39m: fromDirectory
17:58:00 - [34mdebug[39m: isFileInNodeModuleDir
17:58:00 - [34mdebug[39m: processFile
17:58:00 - [34mdebug[39m: isFileInNodeModuleDir
17:58:00 - [34mdebug[39m: processFile
17:58:00 - [34mdebug[39m: isFileInNodeModuleDir
17:58:00 - [34mdebug[39m: processFile
17:58:03 - [34mdebug[39m: fromDirectory
17:58:03 - [34mdebug[39m: isFileInNodeModuleDir
17:58:03 - [34mdebug[39m: isFileInNodeModuleDir
17:58:03 - [34mdebug[39m: isFileInNodeModuleDir
17:58:03 - [34mdebug[39m: isFileInNodeModuleDir
17:58:03 - [34mdebug[39m: processDirectory
17:58:03 - [34mdebug[39m: isFileInNodeModuleDir
17:58:03 - [34mdebug[39m: processFile
17:58:03 - [34mdebug[39m: isFileInNodeModuleDir
17:58:03 - [34mdebug[39m: processFile
17:58:03 - [34mdebug[39m: isFileInNodeModuleDir
17:58:03 - [34mdebug[39m: processFile
17:58:03 - [34mdebug[39m: fromDirectory
17:58:03 - [31merror[39m: In: /Users/umtyzc/cicero-template-library/turkishexample/lib/logic.ergo [At offset 834: unexpected character.
 at line 24 character 35]
Error: In: /Users/umtyzc/cicero-template-library/turkishexample/lib/logic.ergo [At offset 834: unexpected character.
 at line 24 character 35]
    at Object.process (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:969:35)
    at Function.processFile (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:1054:27)
    at items.forEach (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:1039:22)
    at Array.forEach (<anonymous>)
    at Function.processDirectory (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:1038:15)
    at template.getModelManager.updateExternalModels.then (/Users/umtyzc/.nvm/versions/node/v10.1.0/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:945:22)
    at process._tickCallback (internal/process/next_tick.js:68:7)
17:58:03 - [32minfo[39m: undefined
10:35:26 - [32minfo[39m: Using current directory as template folder
10:35:26 - [32minfo[39m: Loading a default sample.txt file.
10:35:26 - [34mdebug[39m: fromDirectory
10:35:26 - [34mdebug[39m: fromDirectory
10:35:26 - [34mdebug[39m: fromDirectory
10:35:26 - [34mdebug[39m: fromDirectory
10:35:26 - [34mdebug[39m: fromDirectory
10:35:26 - [34mdebug[39m: fromDirectory
10:35:26 - [34mdebug[39m: fromDirectory
10:35:26 - [34mdebug[39m: constructor
10:35:26 - [34mdebug[39m: constructor
10:35:26 - [34mdebug[39m: isFileInNodeModuleDir
10:35:26 - [34mdebug[39m: isFileInNodeModuleDir
10:35:26 - [34mdebug[39m: isFileInNodeModuleDir
10:35:26 - [34mdebug[39m: isFileInNodeModuleDir
10:35:26 - [34mdebug[39m: processDirectory
10:35:26 - [34mdebug[39m: isFileInNodeModuleDir
10:35:26 - [34mdebug[39m: processFile
10:35:26 - [34mdebug[39m: isFileInNodeModuleDir
10:35:26 - [34mdebug[39m: processFile
10:35:26 - [34mdebug[39m: isFileInNodeModuleDir
10:35:26 - [34mdebug[39m: processFile
10:35:26 - [34mdebug[39m: isFileInNodeModuleDir
10:35:26 - [34mdebug[39m: processFile
10:35:26 - [34mdebug[39m: isFileInNodeModuleDir
10:35:26 - [34mdebug[39m: processFile
10:35:26 - [34mdebug[39m: fromDirectory
10:35:26 - [34mdebug[39m: isFileInNodeModuleDir
10:35:26 - [34mdebug[39m: processFile
10:35:26 - [34mdebug[39m: isFileInNodeModuleDir
10:35:26 - [34mdebug[39m: processFile
10:35:26 - [34mdebug[39m: isFileInNodeModuleDir
10:35:26 - [34mdebug[39m: processFile
10:35:31 - [34mdebug[39m: fromDirectory
10:35:31 - [34mdebug[39m: isFileInNodeModuleDir
10:35:31 - [34mdebug[39m: isFileInNodeModuleDir
10:35:31 - [34mdebug[39m: isFileInNodeModuleDir
10:35:31 - [34mdebug[39m: isFileInNodeModuleDir
10:35:31 - [34mdebug[39m: processDirectory
10:35:31 - [34mdebug[39m: isFileInNodeModuleDir
10:35:31 - [34mdebug[39m: processFile
10:35:31 - [34mdebug[39m: isFileInNodeModuleDir
10:35:31 - [34mdebug[39m: processFile
10:35:31 - [34mdebug[39m: isFileInNodeModuleDir
10:35:31 - [34mdebug[39m: processFile
10:35:31 - [34mdebug[39m: fromDirectory
10:35:31 - [31merror[39m: In: /Users/umtyzc/cicero-template-library/turkishexample/lib/logic.ergo [At offset 834: unexpected character.
 at line 24 character 35]
Error: In: /Users/umtyzc/cicero-template-library/turkishexample/lib/logic.ergo [At offset 834: unexpected character.
 at line 24 character 35]
    at Object.process (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:969:35)
    at Function.processFile (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:1054:27)
    at items.forEach (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:1039:22)
    at Array.forEach (<anonymous>)
    at Function.processDirectory (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:1038:15)
    at template.getModelManager.updateExternalModels.then (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:945:22)
    at <anonymous>
    at process._tickCallback (internal/process/next_tick.js:188:7)
10:35:31 - [32minfo[39m: undefined
10:37:20 - [32minfo[39m: Using current directory as template folder
10:37:20 - [32minfo[39m: Loading a default sample.txt file.
10:37:20 - [34mdebug[39m: fromDirectory
10:37:20 - [34mdebug[39m: fromDirectory
10:37:20 - [34mdebug[39m: fromDirectory
10:37:20 - [34mdebug[39m: fromDirectory
10:37:20 - [34mdebug[39m: fromDirectory
10:37:20 - [34mdebug[39m: fromDirectory
10:37:20 - [34mdebug[39m: fromDirectory
10:37:20 - [34mdebug[39m: constructor
10:37:20 - [34mdebug[39m: constructor
10:37:20 - [34mdebug[39m: isFileInNodeModuleDir
10:37:20 - [34mdebug[39m: isFileInNodeModuleDir
10:37:20 - [34mdebug[39m: isFileInNodeModuleDir
10:37:20 - [34mdebug[39m: isFileInNodeModuleDir
10:37:20 - [34mdebug[39m: processDirectory
10:37:20 - [34mdebug[39m: isFileInNodeModuleDir
10:37:20 - [34mdebug[39m: processFile
10:37:20 - [34mdebug[39m: isFileInNodeModuleDir
10:37:20 - [34mdebug[39m: processFile
10:37:20 - [34mdebug[39m: isFileInNodeModuleDir
10:37:20 - [34mdebug[39m: processFile
10:37:20 - [34mdebug[39m: isFileInNodeModuleDir
10:37:20 - [34mdebug[39m: processFile
10:37:20 - [34mdebug[39m: isFileInNodeModuleDir
10:37:20 - [34mdebug[39m: processFile
10:37:20 - [34mdebug[39m: fromDirectory
10:37:20 - [34mdebug[39m: isFileInNodeModuleDir
10:37:20 - [34mdebug[39m: processFile
10:37:20 - [34mdebug[39m: isFileInNodeModuleDir
10:37:20 - [34mdebug[39m: processFile
10:37:20 - [34mdebug[39m: isFileInNodeModuleDir
10:37:20 - [34mdebug[39m: processFile
10:37:22 - [34mdebug[39m: fromDirectory
10:37:22 - [34mdebug[39m: isFileInNodeModuleDir
10:37:22 - [34mdebug[39m: isFileInNodeModuleDir
10:37:22 - [34mdebug[39m: isFileInNodeModuleDir
10:37:22 - [34mdebug[39m: isFileInNodeModuleDir
10:37:22 - [34mdebug[39m: processDirectory
10:37:22 - [34mdebug[39m: isFileInNodeModuleDir
10:37:22 - [34mdebug[39m: processFile
10:37:22 - [34mdebug[39m: isFileInNodeModuleDir
10:37:22 - [34mdebug[39m: processFile
10:37:22 - [34mdebug[39m: isFileInNodeModuleDir
10:37:22 - [34mdebug[39m: processFile
10:37:22 - [34mdebug[39m: fromDirectory
10:37:22 - [31merror[39m: In: /Users/umtyzc/cicero-template-library/turkishexample/lib/logic.ergo [At offset 834: unexpected character.
 at line 24 character 35]
Error: In: /Users/umtyzc/cicero-template-library/turkishexample/lib/logic.ergo [At offset 834: unexpected character.
 at line 24 character 35]
    at Object.process (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:969:35)
    at Function.processFile (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:1054:27)
    at items.forEach (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:1039:22)
    at Array.forEach (<anonymous>)
    at Function.processDirectory (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:1038:15)
    at template.getModelManager.updateExternalModels.then (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/template.js:945:22)
    at <anonymous>
    at process._tickCallback (internal/process/next_tick.js:188:7)
10:37:22 - [32minfo[39m: undefined
10:41:27 - [32minfo[39m: Using current directory as template folder
10:41:27 - [32minfo[39m: Loading a default sample.txt file.
10:41:27 - [34mdebug[39m: fromDirectory
10:41:27 - [34mdebug[39m: fromDirectory
10:41:27 - [34mdebug[39m: fromDirectory
10:41:27 - [34mdebug[39m: fromDirectory
10:41:27 - [34mdebug[39m: fromDirectory
10:41:27 - [34mdebug[39m: fromDirectory
10:41:27 - [34mdebug[39m: fromDirectory
10:41:27 - [34mdebug[39m: constructor
10:41:27 - [34mdebug[39m: constructor
10:41:27 - [34mdebug[39m: isFileInNodeModuleDir
10:41:27 - [34mdebug[39m: isFileInNodeModuleDir
10:41:27 - [34mdebug[39m: isFileInNodeModuleDir
10:41:27 - [34mdebug[39m: isFileInNodeModuleDir
10:41:27 - [34mdebug[39m: processDirectory
10:41:27 - [34mdebug[39m: isFileInNodeModuleDir
10:41:27 - [34mdebug[39m: processFile
10:41:27 - [34mdebug[39m: isFileInNodeModuleDir
10:41:27 - [34mdebug[39m: processFile
10:41:27 - [34mdebug[39m: isFileInNodeModuleDir
10:41:27 - [34mdebug[39m: processFile
10:41:27 - [34mdebug[39m: isFileInNodeModuleDir
10:41:27 - [34mdebug[39m: processFile
10:41:27 - [34mdebug[39m: isFileInNodeModuleDir
10:41:27 - [34mdebug[39m: processFile
10:41:27 - [34mdebug[39m: fromDirectory
10:41:27 - [34mdebug[39m: isFileInNodeModuleDir
10:41:27 - [34mdebug[39m: processFile
10:41:27 - [34mdebug[39m: isFileInNodeModuleDir
10:41:27 - [34mdebug[39m: processFile
10:41:27 - [34mdebug[39m: isFileInNodeModuleDir
10:41:27 - [34mdebug[39m: processFile
10:41:30 - [34mdebug[39m: fromDirectory
10:41:30 - [34mdebug[39m: isFileInNodeModuleDir
10:41:30 - [34mdebug[39m: isFileInNodeModuleDir
10:41:30 - [34mdebug[39m: isFileInNodeModuleDir
10:41:30 - [34mdebug[39m: isFileInNodeModuleDir
10:41:30 - [34mdebug[39m: processDirectory
10:41:30 - [34mdebug[39m: isFileInNodeModuleDir
10:41:30 - [34mdebug[39m: processFile
10:41:30 - [34mdebug[39m: isFileInNodeModuleDir
10:41:30 - [34mdebug[39m: processFile
10:41:30 - [34mdebug[39m: isFileInNodeModuleDir
10:41:30 - [34mdebug[39m: processFile
10:41:30 - [34mdebug[39m: fromDirectory
10:41:30 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "satici")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "satici")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



10:41:30 - [34mdebug[39m: fromDirectory
10:41:30 - [34mdebug[39m: isFileInNodeModuleDir
10:41:30 - [34mdebug[39m: processFile
10:41:30 - [34mdebug[39m: isFileInNodeModuleDir
10:41:30 - [34mdebug[39m: processFile
10:41:30 - [34mdebug[39m: isFileInNodeModuleDir
10:41:30 - [34mdebug[39m: processFile
10:41:30 - [34mdebug[39m: isFileInNodeModuleDir
10:41:30 - [34mdebug[39m: processFile
10:41:30 - [34mdebug[39m: isFileInNodeModuleDir
10:41:30 - [34mdebug[39m: processFile
10:41:30 - [34mdebug[39m: fromDirectory
10:41:30 - [34mdebug[39m: buildGrammar
10:41:30 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
10:41:30 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
10:41:30 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
10:41:30 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
10:41:30 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
10:41:30 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
10:41:30 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
10:41:30 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
10:41:30 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
10:41:30 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
10:41:30 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
10:41:30 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
10:41:30 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        contractId : "1a86f026-fbde-4deb-91bf-138f23c27a82",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satisozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


CryptoMonetaryAmount -> Double  __  CryptoCurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.CryptoMonetaryAmount",
        doubleValue : data[0],
        cryptoCurrencyCode : data[2]
    };
}
%}


CryptoCurrencyCode -> "ADA" {% id %} | "BCH" {% id %} | "BTC" {% id %} | "DASH" {% id %} | "EOS" {% id %} | "ETC" {% id %} | "ETH" {% id %} | "LTC" {% id %} | "NEO" {% id %} | "XLM" {% id %} | "XMR" {% id %} | "XRP" {% id %} | "ZEC" {% id %} 


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
10:41:31 - [34mdebug[39m: fromDirectory
10:41:31 - [34mdebug[39m: fromDirectory
10:41:31 - [31merror[39m: invalid syntax at line 6 col 18:

              1.1  canyazi (Bundan sonra ALICI olarak anılacaktır)
                   ^
Unexpected "c"

Error: invalid syntax at line 6 col 18:

              1.1  canyazi (Bundan sonra ALICI olarak anılacaktır)
                   ^
Unexpected "c"

    at Parser.feed (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/nearley/lib/nearley.js:317:27)
    at Clause.parse (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/templateinstance.js:96:16)
    at Template.fromDirectory.then (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/lib/commands.js:54:24)
    at <anonymous>
    at process._tickCallback (internal/process/next_tick.js:188:7)
10:41:31 - [32minfo[39m: undefined
11:28:05 - [32minfo[39m: Using current directory as template folder
11:28:05 - [32minfo[39m: Loading a default sample.txt file.
11:28:05 - [34mdebug[39m: fromDirectory
11:28:05 - [34mdebug[39m: fromDirectory
11:28:05 - [34mdebug[39m: fromDirectory
11:28:05 - [34mdebug[39m: fromDirectory
11:28:05 - [34mdebug[39m: fromDirectory
11:28:05 - [34mdebug[39m: fromDirectory
11:28:05 - [34mdebug[39m: fromDirectory
11:28:05 - [34mdebug[39m: constructor
11:28:05 - [34mdebug[39m: constructor
11:28:05 - [34mdebug[39m: isFileInNodeModuleDir
11:28:05 - [34mdebug[39m: isFileInNodeModuleDir
11:28:05 - [34mdebug[39m: isFileInNodeModuleDir
11:28:05 - [34mdebug[39m: isFileInNodeModuleDir
11:28:05 - [34mdebug[39m: processDirectory
11:28:05 - [34mdebug[39m: isFileInNodeModuleDir
11:28:05 - [34mdebug[39m: processFile
11:28:05 - [34mdebug[39m: isFileInNodeModuleDir
11:28:05 - [34mdebug[39m: processFile
11:28:05 - [34mdebug[39m: isFileInNodeModuleDir
11:28:05 - [34mdebug[39m: processFile
11:28:05 - [34mdebug[39m: isFileInNodeModuleDir
11:28:05 - [34mdebug[39m: processFile
11:28:05 - [34mdebug[39m: isFileInNodeModuleDir
11:28:05 - [34mdebug[39m: processFile
11:28:05 - [34mdebug[39m: fromDirectory
11:28:05 - [34mdebug[39m: isFileInNodeModuleDir
11:28:05 - [34mdebug[39m: processFile
11:28:05 - [34mdebug[39m: isFileInNodeModuleDir
11:28:05 - [34mdebug[39m: processFile
11:28:05 - [34mdebug[39m: isFileInNodeModuleDir
11:28:05 - [34mdebug[39m: processFile
11:28:13 - [34mdebug[39m: fromDirectory
11:28:13 - [34mdebug[39m: isFileInNodeModuleDir
11:28:13 - [34mdebug[39m: isFileInNodeModuleDir
11:28:13 - [34mdebug[39m: isFileInNodeModuleDir
11:28:13 - [34mdebug[39m: isFileInNodeModuleDir
11:28:13 - [34mdebug[39m: processDirectory
11:28:13 - [34mdebug[39m: isFileInNodeModuleDir
11:28:13 - [34mdebug[39m: processFile
11:28:13 - [34mdebug[39m: isFileInNodeModuleDir
11:28:13 - [34mdebug[39m: processFile
11:28:13 - [34mdebug[39m: isFileInNodeModuleDir
11:28:13 - [34mdebug[39m: processFile
11:28:13 - [34mdebug[39m: fromDirectory
11:28:13 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "satici")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "satici")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



11:28:13 - [34mdebug[39m: fromDirectory
11:28:13 - [34mdebug[39m: isFileInNodeModuleDir
11:28:13 - [34mdebug[39m: processFile
11:28:13 - [34mdebug[39m: isFileInNodeModuleDir
11:28:13 - [34mdebug[39m: processFile
11:28:13 - [34mdebug[39m: isFileInNodeModuleDir
11:28:13 - [34mdebug[39m: processFile
11:28:13 - [34mdebug[39m: isFileInNodeModuleDir
11:28:13 - [34mdebug[39m: processFile
11:28:13 - [34mdebug[39m: isFileInNodeModuleDir
11:28:13 - [34mdebug[39m: processFile
11:28:13 - [34mdebug[39m: fromDirectory
11:28:13 - [34mdebug[39m: buildGrammar
11:28:13 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
11:28:13 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
11:28:13 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
11:28:13 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
11:28:13 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
11:28:13 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
11:28:13 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
11:28:13 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
11:28:13 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
11:28:13 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
11:28:13 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
11:28:13 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
11:28:13 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        contractId : "83ebe80a-8d04-4267-af05-29aade0bf579",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satisozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


CryptoMonetaryAmount -> Double  __  CryptoCurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.CryptoMonetaryAmount",
        doubleValue : data[0],
        cryptoCurrencyCode : data[2]
    };
}
%}


CryptoCurrencyCode -> "ADA" {% id %} | "BCH" {% id %} | "BTC" {% id %} | "DASH" {% id %} | "EOS" {% id %} | "ETC" {% id %} | "ETH" {% id %} | "LTC" {% id %} | "NEO" {% id %} | "XLM" {% id %} | "XMR" {% id %} | "XRP" {% id %} | "ZEC" {% id %} 


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
11:28:13 - [34mdebug[39m: fromDirectory
11:28:13 - [34mdebug[39m: fromDirectory
11:28:13 - [31merror[39m: invalid syntax at line 13 col 0:

  
  ^
Unexpected "\n"

Error: invalid syntax at line 13 col 0:

  
  ^
Unexpected "\n"

    at Parser.feed (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/nearley/lib/nearley.js:317:27)
    at Clause.parse (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/templateinstance.js:96:16)
    at Template.fromDirectory.then (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/lib/commands.js:54:24)
    at <anonymous>
    at process._tickCallback (internal/process/next_tick.js:188:7)
11:28:13 - [32minfo[39m: undefined
11:30:09 - [32minfo[39m: Using current directory as template folder
11:30:09 - [32minfo[39m: Loading a default sample.txt file.
11:30:09 - [34mdebug[39m: fromDirectory
11:30:09 - [34mdebug[39m: fromDirectory
11:30:09 - [34mdebug[39m: fromDirectory
11:30:09 - [34mdebug[39m: fromDirectory
11:30:09 - [34mdebug[39m: fromDirectory
11:30:09 - [34mdebug[39m: fromDirectory
11:30:09 - [34mdebug[39m: fromDirectory
11:30:10 - [34mdebug[39m: constructor
11:30:10 - [34mdebug[39m: constructor
11:30:10 - [34mdebug[39m: isFileInNodeModuleDir
11:30:10 - [34mdebug[39m: isFileInNodeModuleDir
11:30:10 - [34mdebug[39m: isFileInNodeModuleDir
11:30:10 - [34mdebug[39m: isFileInNodeModuleDir
11:30:10 - [34mdebug[39m: processDirectory
11:30:10 - [34mdebug[39m: isFileInNodeModuleDir
11:30:10 - [34mdebug[39m: processFile
11:30:10 - [34mdebug[39m: isFileInNodeModuleDir
11:30:10 - [34mdebug[39m: processFile
11:30:10 - [34mdebug[39m: isFileInNodeModuleDir
11:30:10 - [34mdebug[39m: processFile
11:30:10 - [34mdebug[39m: isFileInNodeModuleDir
11:30:10 - [34mdebug[39m: processFile
11:30:10 - [34mdebug[39m: isFileInNodeModuleDir
11:30:10 - [34mdebug[39m: processFile
11:30:10 - [34mdebug[39m: fromDirectory
11:30:10 - [34mdebug[39m: isFileInNodeModuleDir
11:30:10 - [34mdebug[39m: processFile
11:30:10 - [34mdebug[39m: isFileInNodeModuleDir
11:30:10 - [34mdebug[39m: processFile
11:30:10 - [34mdebug[39m: isFileInNodeModuleDir
11:30:10 - [34mdebug[39m: processFile
11:30:12 - [34mdebug[39m: fromDirectory
11:30:12 - [34mdebug[39m: isFileInNodeModuleDir
11:30:12 - [34mdebug[39m: isFileInNodeModuleDir
11:30:12 - [34mdebug[39m: isFileInNodeModuleDir
11:30:12 - [34mdebug[39m: isFileInNodeModuleDir
11:30:12 - [34mdebug[39m: processDirectory
11:30:12 - [34mdebug[39m: isFileInNodeModuleDir
11:30:12 - [34mdebug[39m: processFile
11:30:12 - [34mdebug[39m: isFileInNodeModuleDir
11:30:12 - [34mdebug[39m: processFile
11:30:12 - [34mdebug[39m: isFileInNodeModuleDir
11:30:12 - [34mdebug[39m: processFile
11:30:12 - [34mdebug[39m: fromDirectory
11:30:12 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "satici")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "satici")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



11:30:12 - [34mdebug[39m: fromDirectory
11:30:12 - [34mdebug[39m: isFileInNodeModuleDir
11:30:12 - [34mdebug[39m: processFile
11:30:12 - [34mdebug[39m: isFileInNodeModuleDir
11:30:12 - [34mdebug[39m: processFile
11:30:12 - [34mdebug[39m: isFileInNodeModuleDir
11:30:12 - [34mdebug[39m: processFile
11:30:12 - [34mdebug[39m: isFileInNodeModuleDir
11:30:12 - [34mdebug[39m: processFile
11:30:12 - [34mdebug[39m: isFileInNodeModuleDir
11:30:12 - [34mdebug[39m: processFile
11:30:12 - [34mdebug[39m: fromDirectory
11:30:12 - [34mdebug[39m: buildGrammar
11:30:12 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
11:30:12 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
11:30:12 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
11:30:12 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
11:30:12 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
11:30:12 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
11:30:12 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
11:30:12 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
11:30:12 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
11:30:12 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
11:30:12 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
11:30:12 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
11:30:12 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        contractId : "948347f8-39f7-45d1-9d4a-f2f06fbfcee1",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satisozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


CryptoMonetaryAmount -> Double  __  CryptoCurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.CryptoMonetaryAmount",
        doubleValue : data[0],
        cryptoCurrencyCode : data[2]
    };
}
%}


CryptoCurrencyCode -> "ADA" {% id %} | "BCH" {% id %} | "BTC" {% id %} | "DASH" {% id %} | "EOS" {% id %} | "ETC" {% id %} | "ETH" {% id %} | "LTC" {% id %} | "NEO" {% id %} | "XLM" {% id %} | "XMR" {% id %} | "XRP" {% id %} | "ZEC" {% id %} 


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
11:30:12 - [34mdebug[39m: fromDirectory
11:30:12 - [34mdebug[39m: fromDirectory
11:30:12 - [31merror[39m: invalid syntax at line 15 col 0:

  
  ^
Unexpected "\n"

Error: invalid syntax at line 15 col 0:

  
  ^
Unexpected "\n"

    at Parser.feed (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/nearley/lib/nearley.js:317:27)
    at Clause.parse (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-core/lib/templateinstance.js:96:16)
    at Template.fromDirectory.then (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/lib/commands.js:54:24)
    at <anonymous>
    at process._tickCallback (internal/process/next_tick.js:188:7)
11:30:12 - [32minfo[39m: undefined
11:32:27 - [32minfo[39m: Using current directory as template folder
11:32:27 - [32minfo[39m: Loading a default sample.txt file.
11:32:27 - [34mdebug[39m: fromDirectory
11:32:27 - [34mdebug[39m: fromDirectory
11:32:27 - [34mdebug[39m: fromDirectory
11:32:27 - [34mdebug[39m: fromDirectory
11:32:27 - [34mdebug[39m: fromDirectory
11:32:27 - [34mdebug[39m: fromDirectory
11:32:27 - [34mdebug[39m: fromDirectory
11:32:27 - [34mdebug[39m: constructor
11:32:27 - [34mdebug[39m: constructor
11:32:27 - [34mdebug[39m: isFileInNodeModuleDir
11:32:27 - [34mdebug[39m: isFileInNodeModuleDir
11:32:27 - [34mdebug[39m: isFileInNodeModuleDir
11:32:27 - [34mdebug[39m: isFileInNodeModuleDir
11:32:27 - [34mdebug[39m: processDirectory
11:32:27 - [34mdebug[39m: isFileInNodeModuleDir
11:32:27 - [34mdebug[39m: processFile
11:32:27 - [34mdebug[39m: isFileInNodeModuleDir
11:32:27 - [34mdebug[39m: processFile
11:32:27 - [34mdebug[39m: isFileInNodeModuleDir
11:32:27 - [34mdebug[39m: processFile
11:32:27 - [34mdebug[39m: isFileInNodeModuleDir
11:32:27 - [34mdebug[39m: processFile
11:32:27 - [34mdebug[39m: isFileInNodeModuleDir
11:32:27 - [34mdebug[39m: processFile
11:32:27 - [34mdebug[39m: fromDirectory
11:32:27 - [34mdebug[39m: isFileInNodeModuleDir
11:32:27 - [34mdebug[39m: processFile
11:32:27 - [34mdebug[39m: isFileInNodeModuleDir
11:32:27 - [34mdebug[39m: processFile
11:32:27 - [34mdebug[39m: isFileInNodeModuleDir
11:32:27 - [34mdebug[39m: processFile
11:32:30 - [34mdebug[39m: fromDirectory
11:32:30 - [34mdebug[39m: isFileInNodeModuleDir
11:32:30 - [34mdebug[39m: isFileInNodeModuleDir
11:32:30 - [34mdebug[39m: isFileInNodeModuleDir
11:32:30 - [34mdebug[39m: isFileInNodeModuleDir
11:32:30 - [34mdebug[39m: processDirectory
11:32:30 - [34mdebug[39m: isFileInNodeModuleDir
11:32:30 - [34mdebug[39m: processFile
11:32:30 - [34mdebug[39m: isFileInNodeModuleDir
11:32:30 - [34mdebug[39m: processFile
11:32:30 - [34mdebug[39m: isFileInNodeModuleDir
11:32:30 - [34mdebug[39m: processFile
11:32:30 - [34mdebug[39m: fromDirectory
11:32:30 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "satici")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "satici")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



11:32:30 - [34mdebug[39m: fromDirectory
11:32:30 - [34mdebug[39m: isFileInNodeModuleDir
11:32:30 - [34mdebug[39m: processFile
11:32:30 - [34mdebug[39m: isFileInNodeModuleDir
11:32:30 - [34mdebug[39m: processFile
11:32:30 - [34mdebug[39m: isFileInNodeModuleDir
11:32:30 - [34mdebug[39m: processFile
11:32:30 - [34mdebug[39m: isFileInNodeModuleDir
11:32:30 - [34mdebug[39m: processFile
11:32:30 - [34mdebug[39m: isFileInNodeModuleDir
11:32:30 - [34mdebug[39m: processFile
11:32:30 - [34mdebug[39m: fromDirectory
11:32:30 - [34mdebug[39m: buildGrammar
11:32:30 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
11:32:30 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
11:32:30 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
11:32:30 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
11:32:30 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
11:32:30 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
11:32:30 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
11:32:30 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
11:32:30 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
11:32:30 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
11:32:30 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
11:32:30 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
11:32:30 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        contractId : "1f33c6c1-05ec-4c22-a014-a67475c36a1c",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satisozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


CryptoMonetaryAmount -> Double  __  CryptoCurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.CryptoMonetaryAmount",
        doubleValue : data[0],
        cryptoCurrencyCode : data[2]
    };
}
%}


CryptoCurrencyCode -> "ADA" {% id %} | "BCH" {% id %} | "BTC" {% id %} | "DASH" {% id %} | "EOS" {% id %} | "ETC" {% id %} | "ETH" {% id %} | "LTC" {% id %} | "NEO" {% id %} | "XLM" {% id %} | "XMR" {% id %} | "XRP" {% id %} | "ZEC" {% id %} 


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
11:32:31 - [34mdebug[39m: fromDirectory
11:32:31 - [34mdebug[39m: fromDirectory
11:32:31 - [34mdebug[39m: Result of parsing: {"$class":"org.example.satisozlesmesi.satisozlesmesi","contractId":"1f33c6c1-05ec-4c22-a014-a67475c36a1c","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
11:32:31 - [34mdebug[39m: Setting clause data: {"$class":"org.example.satisozlesmesi.satisozlesmesi","contractId":"1f33c6c1-05ec-4c22-a014-a67475c36a1c","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
11:32:31 - [32minfo[39m:
[33m{[39m
  [33m"[39m[32m$class[39m[33m"[39m[33m: [39m[33m"[39m[35morg.example.satisozlesmesi.satisozlesmesi[39m[33m"[39m[33m,[39m
  [33m"[39m[32mcontractId[39m[33m"[39m[33m: [39m[33m"[39m[35m1f33c6c1-05ec-4c22-a014-a67475c36a1c[39m[33m"[39m[33m,[39m
  [33m"[39m[32malici[39m[33m"[39m[33m: [39m[33m"[39m[35mumut[39m[33m"[39m[33m,[39m
  [33m"[39m[32msatici[39m[33m"[39m[33m: [39m[33m"[39m[35mserkan[39m[33m"[39m[33m,[39m
  [33m"[39m[32mprogname[39m[33m"[39m[33m: [39m[33m"[39m[35mprog[39m[33m"[39m[33m,[39m
  [33m"[39m[32musernum[39m[33m"[39m[33m: [39m[33m"[39m[35m2[39m[33m"[39m[33m,[39m
  [33m"[39m[32mmahkemebolge[39m[33m"[39m[33m: [39m[33m"[39m[35mankara[39m[33m"[39m
[33m}[39m
11:33:43 - [32minfo[39m: Using current directory as template folder
11:33:43 - [32minfo[39m: Loading a default sample.txt file.
11:33:43 - [32minfo[39m: Loading a single default request.json file.
11:33:43 - [32minfo[39m: Loading a default state.json file.
11:33:43 - [33mwarn[39m: A state file was not provided, generating default state object. Try the --state flag or create a state.json in the root folder of your template.
11:33:43 - [34mdebug[39m: fromDirectory
11:33:43 - [34mdebug[39m: fromDirectory
11:33:43 - [34mdebug[39m: fromDirectory
11:33:43 - [34mdebug[39m: fromDirectory
11:33:43 - [34mdebug[39m: fromDirectory
11:33:43 - [34mdebug[39m: fromDirectory
11:33:43 - [34mdebug[39m: fromDirectory
11:33:43 - [34mdebug[39m: constructor
11:33:43 - [34mdebug[39m: constructor
11:33:43 - [34mdebug[39m: isFileInNodeModuleDir
11:33:43 - [34mdebug[39m: isFileInNodeModuleDir
11:33:43 - [34mdebug[39m: isFileInNodeModuleDir
11:33:43 - [34mdebug[39m: isFileInNodeModuleDir
11:33:43 - [34mdebug[39m: processDirectory
11:33:43 - [34mdebug[39m: isFileInNodeModuleDir
11:33:43 - [34mdebug[39m: processFile
11:33:43 - [34mdebug[39m: isFileInNodeModuleDir
11:33:43 - [34mdebug[39m: processFile
11:33:43 - [34mdebug[39m: isFileInNodeModuleDir
11:33:43 - [34mdebug[39m: processFile
11:33:43 - [34mdebug[39m: isFileInNodeModuleDir
11:33:43 - [34mdebug[39m: processFile
11:33:43 - [34mdebug[39m: isFileInNodeModuleDir
11:33:43 - [34mdebug[39m: processFile
11:33:43 - [34mdebug[39m: fromDirectory
11:33:43 - [34mdebug[39m: isFileInNodeModuleDir
11:33:43 - [34mdebug[39m: processFile
11:33:43 - [34mdebug[39m: isFileInNodeModuleDir
11:33:43 - [34mdebug[39m: processFile
11:33:43 - [34mdebug[39m: isFileInNodeModuleDir
11:33:43 - [34mdebug[39m: processFile
11:33:47 - [34mdebug[39m: fromDirectory
11:33:47 - [34mdebug[39m: isFileInNodeModuleDir
11:33:47 - [34mdebug[39m: isFileInNodeModuleDir
11:33:47 - [34mdebug[39m: isFileInNodeModuleDir
11:33:47 - [34mdebug[39m: isFileInNodeModuleDir
11:33:47 - [34mdebug[39m: processDirectory
11:33:47 - [34mdebug[39m: isFileInNodeModuleDir
11:33:47 - [34mdebug[39m: processFile
11:33:47 - [34mdebug[39m: isFileInNodeModuleDir
11:33:47 - [34mdebug[39m: processFile
11:33:47 - [34mdebug[39m: isFileInNodeModuleDir
11:33:47 - [34mdebug[39m: processFile
11:33:47 - [34mdebug[39m: fromDirectory
11:33:47 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "satici")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "satici")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



11:33:47 - [34mdebug[39m: fromDirectory
11:33:47 - [34mdebug[39m: isFileInNodeModuleDir
11:33:47 - [34mdebug[39m: processFile
11:33:47 - [34mdebug[39m: isFileInNodeModuleDir
11:33:47 - [34mdebug[39m: processFile
11:33:47 - [34mdebug[39m: isFileInNodeModuleDir
11:33:47 - [34mdebug[39m: processFile
11:33:47 - [34mdebug[39m: isFileInNodeModuleDir
11:33:47 - [34mdebug[39m: processFile
11:33:47 - [34mdebug[39m: isFileInNodeModuleDir
11:33:47 - [34mdebug[39m: processFile
11:33:47 - [34mdebug[39m: fromDirectory
11:33:47 - [34mdebug[39m: buildGrammar
11:33:47 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
11:33:47 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
11:33:47 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
11:33:47 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
11:33:47 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
11:33:47 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
11:33:47 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
11:33:47 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
11:33:47 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
11:33:47 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
11:33:47 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
11:33:47 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
11:33:48 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        contractId : "5167cf20-2703-4c1d-9169-4f03f3e95851",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satisozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.example.satisozlesmesi.satisozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


CryptoMonetaryAmount -> Double  __  CryptoCurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.CryptoMonetaryAmount",
        doubleValue : data[0],
        cryptoCurrencyCode : data[2]
    };
}
%}


CryptoCurrencyCode -> "ADA" {% id %} | "BCH" {% id %} | "BTC" {% id %} | "DASH" {% id %} | "EOS" {% id %} | "ETC" {% id %} | "ETH" {% id %} | "LTC" {% id %} | "NEO" {% id %} | "XLM" {% id %} | "XMR" {% id %} | "XRP" {% id %} | "ZEC" {% id %} 


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
11:33:48 - [34mdebug[39m: fromDirectory
11:33:48 - [34mdebug[39m: fromDirectory
11:33:48 - [34mdebug[39m: Result of parsing: {"$class":"org.example.satisozlesmesi.satisozlesmesi","contractId":"5167cf20-2703-4c1d-9169-4f03f3e95851","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
11:33:48 - [34mdebug[39m: Setting clause data: {"$class":"org.example.satisozlesmesi.satisozlesmesi","contractId":"5167cf20-2703-4c1d-9169-4f03f3e95851","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
11:33:48 - [31merror[39m: Namespace is not defined for type org.accordproject.satissozlesmesi.confirmRequest
TypeNotFoundException: Namespace is not defined for type org.accordproject.satissozlesmesi.confirmRequest
    at ModelManager.getType (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/composer-common/lib/modelmanager.js:444:19)
    at Serializer.fromJSON (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/composer-common/lib/serializer.js:155:52)
    at Engine.execute (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-engine/lib/engine.js:203:55)
    at Template.fromDirectory.then (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/lib/commands.js:151:45)
    at <anonymous>
    at process._tickCallback (internal/process/next_tick.js:188:7)
11:33:48 - [32minfo[39m: undefined
11:37:05 - [32minfo[39m: Using current directory as template folder
11:37:05 - [32minfo[39m: Loading a default sample.txt file.
11:37:05 - [32minfo[39m: Loading a single default request.json file.
11:37:05 - [32minfo[39m: Loading a default state.json file.
11:37:05 - [33mwarn[39m: A state file was not provided, generating default state object. Try the --state flag or create a state.json in the root folder of your template.
11:37:05 - [34mdebug[39m: fromDirectory
11:37:05 - [34mdebug[39m: fromDirectory
11:37:05 - [34mdebug[39m: fromDirectory
11:37:05 - [34mdebug[39m: fromDirectory
11:37:05 - [34mdebug[39m: fromDirectory
11:37:05 - [34mdebug[39m: fromDirectory
11:37:05 - [34mdebug[39m: fromDirectory
11:37:05 - [34mdebug[39m: constructor
11:37:05 - [34mdebug[39m: constructor
11:37:05 - [34mdebug[39m: isFileInNodeModuleDir
11:37:05 - [34mdebug[39m: isFileInNodeModuleDir
11:37:05 - [34mdebug[39m: isFileInNodeModuleDir
11:37:05 - [34mdebug[39m: isFileInNodeModuleDir
11:37:05 - [34mdebug[39m: processDirectory
11:37:05 - [34mdebug[39m: isFileInNodeModuleDir
11:37:05 - [34mdebug[39m: processFile
11:37:05 - [34mdebug[39m: isFileInNodeModuleDir
11:37:05 - [34mdebug[39m: processFile
11:37:05 - [34mdebug[39m: isFileInNodeModuleDir
11:37:05 - [34mdebug[39m: processFile
11:37:05 - [34mdebug[39m: isFileInNodeModuleDir
11:37:05 - [34mdebug[39m: processFile
11:37:05 - [34mdebug[39m: isFileInNodeModuleDir
11:37:05 - [34mdebug[39m: processFile
11:37:05 - [34mdebug[39m: fromDirectory
11:37:05 - [34mdebug[39m: isFileInNodeModuleDir
11:37:05 - [34mdebug[39m: processFile
11:37:05 - [34mdebug[39m: isFileInNodeModuleDir
11:37:05 - [34mdebug[39m: processFile
11:37:05 - [34mdebug[39m: isFileInNodeModuleDir
11:37:05 - [34mdebug[39m: processFile
11:37:09 - [34mdebug[39m: fromDirectory
11:37:09 - [34mdebug[39m: isFileInNodeModuleDir
11:37:09 - [34mdebug[39m: isFileInNodeModuleDir
11:37:09 - [34mdebug[39m: isFileInNodeModuleDir
11:37:09 - [34mdebug[39m: isFileInNodeModuleDir
11:37:09 - [34mdebug[39m: processDirectory
11:37:09 - [34mdebug[39m: isFileInNodeModuleDir
11:37:09 - [34mdebug[39m: processFile
11:37:09 - [34mdebug[39m: isFileInNodeModuleDir
11:37:09 - [34mdebug[39m: processFile
11:37:09 - [34mdebug[39m: isFileInNodeModuleDir
11:37:09 - [34mdebug[39m: processFile
11:37:09 - [34mdebug[39m: fromDirectory
11:37:09 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "satici")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "satici")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



11:37:09 - [34mdebug[39m: fromDirectory
11:37:09 - [34mdebug[39m: isFileInNodeModuleDir
11:37:09 - [34mdebug[39m: processFile
11:37:09 - [34mdebug[39m: isFileInNodeModuleDir
11:37:09 - [34mdebug[39m: processFile
11:37:09 - [34mdebug[39m: isFileInNodeModuleDir
11:37:09 - [34mdebug[39m: processFile
11:37:09 - [34mdebug[39m: isFileInNodeModuleDir
11:37:09 - [34mdebug[39m: processFile
11:37:09 - [34mdebug[39m: isFileInNodeModuleDir
11:37:09 - [34mdebug[39m: processFile
11:37:09 - [34mdebug[39m: fromDirectory
11:37:09 - [34mdebug[39m: buildGrammar
11:37:09 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
11:37:09 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
11:37:09 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
11:37:09 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
11:37:09 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
11:37:09 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
11:37:09 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
11:37:09 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
11:37:09 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
11:37:09 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
11:37:09 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
11:37:09 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
11:37:09 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.example.satissozlesmesi.satisozlesmesi",
        contractId : "3c9f5d0e-c1d9-44c0-875c-70111812291b",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satissozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satissozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satisozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.example.satissozlesmesi.satisozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


CryptoMonetaryAmount -> Double  __  CryptoCurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.CryptoMonetaryAmount",
        doubleValue : data[0],
        cryptoCurrencyCode : data[2]
    };
}
%}


CryptoCurrencyCode -> "ADA" {% id %} | "BCH" {% id %} | "BTC" {% id %} | "DASH" {% id %} | "EOS" {% id %} | "ETC" {% id %} | "ETH" {% id %} | "LTC" {% id %} | "NEO" {% id %} | "XLM" {% id %} | "XMR" {% id %} | "XRP" {% id %} | "ZEC" {% id %} 


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
11:37:10 - [34mdebug[39m: fromDirectory
11:37:10 - [34mdebug[39m: fromDirectory
11:37:10 - [34mdebug[39m: Result of parsing: {"$class":"org.example.satissozlesmesi.satisozlesmesi","contractId":"3c9f5d0e-c1d9-44c0-875c-70111812291b","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
11:37:10 - [34mdebug[39m: Setting clause data: {"$class":"org.example.satissozlesmesi.satisozlesmesi","contractId":"3c9f5d0e-c1d9-44c0-875c-70111812291b","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
11:37:10 - [31merror[39m: Namespace is not defined for type org.accordproject.satissozlesmesi.confirmRequest
TypeNotFoundException: Namespace is not defined for type org.accordproject.satissozlesmesi.confirmRequest
    at ModelManager.getType (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/composer-common/lib/modelmanager.js:444:19)
    at Serializer.fromJSON (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/composer-common/lib/serializer.js:155:52)
    at Engine.execute (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-engine/lib/engine.js:203:55)
    at Template.fromDirectory.then (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/lib/commands.js:151:45)
    at <anonymous>
    at process._tickCallback (internal/process/next_tick.js:188:7)
11:37:10 - [32minfo[39m: undefined
11:38:55 - [32minfo[39m: Using current directory as template folder
11:38:55 - [32minfo[39m: Loading a default sample.txt file.
11:38:55 - [34mdebug[39m: fromDirectory
11:38:55 - [34mdebug[39m: fromDirectory
11:38:55 - [34mdebug[39m: fromDirectory
11:38:55 - [34mdebug[39m: fromDirectory
11:38:55 - [34mdebug[39m: fromDirectory
11:38:55 - [34mdebug[39m: fromDirectory
11:38:55 - [34mdebug[39m: fromDirectory
11:38:56 - [34mdebug[39m: constructor
11:38:56 - [34mdebug[39m: constructor
11:38:56 - [34mdebug[39m: isFileInNodeModuleDir
11:38:56 - [34mdebug[39m: isFileInNodeModuleDir
11:38:56 - [34mdebug[39m: isFileInNodeModuleDir
11:38:56 - [34mdebug[39m: isFileInNodeModuleDir
11:38:56 - [34mdebug[39m: processDirectory
11:38:56 - [34mdebug[39m: isFileInNodeModuleDir
11:38:56 - [34mdebug[39m: processFile
11:38:56 - [34mdebug[39m: isFileInNodeModuleDir
11:38:56 - [34mdebug[39m: processFile
11:38:56 - [34mdebug[39m: isFileInNodeModuleDir
11:38:56 - [34mdebug[39m: processFile
11:38:56 - [34mdebug[39m: isFileInNodeModuleDir
11:38:56 - [34mdebug[39m: processFile
11:38:56 - [34mdebug[39m: isFileInNodeModuleDir
11:38:56 - [34mdebug[39m: processFile
11:38:56 - [34mdebug[39m: fromDirectory
11:38:56 - [34mdebug[39m: isFileInNodeModuleDir
11:38:56 - [34mdebug[39m: processFile
11:38:56 - [34mdebug[39m: isFileInNodeModuleDir
11:38:56 - [34mdebug[39m: processFile
11:38:56 - [34mdebug[39m: isFileInNodeModuleDir
11:38:56 - [34mdebug[39m: processFile
11:38:59 - [34mdebug[39m: fromDirectory
11:38:59 - [34mdebug[39m: isFileInNodeModuleDir
11:38:59 - [34mdebug[39m: isFileInNodeModuleDir
11:38:59 - [34mdebug[39m: isFileInNodeModuleDir
11:38:59 - [34mdebug[39m: isFileInNodeModuleDir
11:38:59 - [34mdebug[39m: processDirectory
11:38:59 - [34mdebug[39m: isFileInNodeModuleDir
11:38:59 - [34mdebug[39m: processFile
11:38:59 - [34mdebug[39m: isFileInNodeModuleDir
11:38:59 - [34mdebug[39m: processFile
11:38:59 - [34mdebug[39m: isFileInNodeModuleDir
11:38:59 - [34mdebug[39m: processFile
11:38:59 - [34mdebug[39m: fromDirectory
11:38:59 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "satici")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "satici")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



11:38:59 - [34mdebug[39m: fromDirectory
11:38:59 - [34mdebug[39m: isFileInNodeModuleDir
11:38:59 - [34mdebug[39m: processFile
11:38:59 - [34mdebug[39m: isFileInNodeModuleDir
11:38:59 - [34mdebug[39m: processFile
11:38:59 - [34mdebug[39m: isFileInNodeModuleDir
11:38:59 - [34mdebug[39m: processFile
11:38:59 - [34mdebug[39m: isFileInNodeModuleDir
11:38:59 - [34mdebug[39m: processFile
11:38:59 - [34mdebug[39m: isFileInNodeModuleDir
11:38:59 - [34mdebug[39m: processFile
11:38:59 - [34mdebug[39m: fromDirectory
11:38:59 - [34mdebug[39m: buildGrammar
11:38:59 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
11:38:59 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
11:38:59 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
11:38:59 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
11:38:59 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
11:38:59 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
11:38:59 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
11:38:59 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
11:38:59 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
11:38:59 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
11:38:59 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
11:38:59 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
11:38:59 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.example.satissozlesmesi.satisozlesmesi",
        contractId : "9dead686-a85c-4821-b76c-c1006612c806",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satissozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satissozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satisozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.example.satissozlesmesi.satisozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


CryptoMonetaryAmount -> Double  __  CryptoCurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.CryptoMonetaryAmount",
        doubleValue : data[0],
        cryptoCurrencyCode : data[2]
    };
}
%}


CryptoCurrencyCode -> "ADA" {% id %} | "BCH" {% id %} | "BTC" {% id %} | "DASH" {% id %} | "EOS" {% id %} | "ETC" {% id %} | "ETH" {% id %} | "LTC" {% id %} | "NEO" {% id %} | "XLM" {% id %} | "XMR" {% id %} | "XRP" {% id %} | "ZEC" {% id %} 


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
11:39:00 - [34mdebug[39m: fromDirectory
11:39:00 - [34mdebug[39m: fromDirectory
11:39:00 - [34mdebug[39m: Result of parsing: {"$class":"org.example.satissozlesmesi.satisozlesmesi","contractId":"9dead686-a85c-4821-b76c-c1006612c806","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
11:39:00 - [34mdebug[39m: Setting clause data: {"$class":"org.example.satissozlesmesi.satisozlesmesi","contractId":"9dead686-a85c-4821-b76c-c1006612c806","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
11:39:00 - [32minfo[39m:
[33m{[39m
  [33m"[39m[32m$class[39m[33m"[39m[33m: [39m[33m"[39m[35morg.example.satissozlesmesi.satisozlesmesi[39m[33m"[39m[33m,[39m
  [33m"[39m[32mcontractId[39m[33m"[39m[33m: [39m[33m"[39m[35m9dead686-a85c-4821-b76c-c1006612c806[39m[33m"[39m[33m,[39m
  [33m"[39m[32malici[39m[33m"[39m[33m: [39m[33m"[39m[35mumut[39m[33m"[39m[33m,[39m
  [33m"[39m[32msatici[39m[33m"[39m[33m: [39m[33m"[39m[35mserkan[39m[33m"[39m[33m,[39m
  [33m"[39m[32mprogname[39m[33m"[39m[33m: [39m[33m"[39m[35mprog[39m[33m"[39m[33m,[39m
  [33m"[39m[32musernum[39m[33m"[39m[33m: [39m[33m"[39m[35m2[39m[33m"[39m[33m,[39m
  [33m"[39m[32mmahkemebolge[39m[33m"[39m[33m: [39m[33m"[39m[35mankara[39m[33m"[39m
[33m}[39m
11:39:03 - [32minfo[39m: Using current directory as template folder
11:39:03 - [32minfo[39m: Loading a default sample.txt file.
11:39:03 - [32minfo[39m: Loading a single default request.json file.
11:39:03 - [32minfo[39m: Loading a default state.json file.
11:39:03 - [33mwarn[39m: A state file was not provided, generating default state object. Try the --state flag or create a state.json in the root folder of your template.
11:39:03 - [34mdebug[39m: fromDirectory
11:39:03 - [34mdebug[39m: fromDirectory
11:39:03 - [34mdebug[39m: fromDirectory
11:39:03 - [34mdebug[39m: fromDirectory
11:39:03 - [34mdebug[39m: fromDirectory
11:39:03 - [34mdebug[39m: fromDirectory
11:39:03 - [34mdebug[39m: fromDirectory
11:39:03 - [34mdebug[39m: constructor
11:39:03 - [34mdebug[39m: constructor
11:39:03 - [34mdebug[39m: isFileInNodeModuleDir
11:39:03 - [34mdebug[39m: isFileInNodeModuleDir
11:39:03 - [34mdebug[39m: isFileInNodeModuleDir
11:39:03 - [34mdebug[39m: isFileInNodeModuleDir
11:39:03 - [34mdebug[39m: processDirectory
11:39:03 - [34mdebug[39m: isFileInNodeModuleDir
11:39:03 - [34mdebug[39m: processFile
11:39:03 - [34mdebug[39m: isFileInNodeModuleDir
11:39:03 - [34mdebug[39m: processFile
11:39:03 - [34mdebug[39m: isFileInNodeModuleDir
11:39:03 - [34mdebug[39m: processFile
11:39:03 - [34mdebug[39m: isFileInNodeModuleDir
11:39:03 - [34mdebug[39m: processFile
11:39:03 - [34mdebug[39m: isFileInNodeModuleDir
11:39:03 - [34mdebug[39m: processFile
11:39:03 - [34mdebug[39m: fromDirectory
11:39:03 - [34mdebug[39m: isFileInNodeModuleDir
11:39:03 - [34mdebug[39m: processFile
11:39:03 - [34mdebug[39m: isFileInNodeModuleDir
11:39:03 - [34mdebug[39m: processFile
11:39:03 - [34mdebug[39m: isFileInNodeModuleDir
11:39:03 - [34mdebug[39m: processFile
11:39:05 - [34mdebug[39m: fromDirectory
11:39:05 - [34mdebug[39m: isFileInNodeModuleDir
11:39:05 - [34mdebug[39m: isFileInNodeModuleDir
11:39:05 - [34mdebug[39m: isFileInNodeModuleDir
11:39:05 - [34mdebug[39m: isFileInNodeModuleDir
11:39:05 - [34mdebug[39m: processDirectory
11:39:05 - [34mdebug[39m: isFileInNodeModuleDir
11:39:05 - [34mdebug[39m: processFile
11:39:05 - [34mdebug[39m: isFileInNodeModuleDir
11:39:05 - [34mdebug[39m: processFile
11:39:05 - [34mdebug[39m: isFileInNodeModuleDir
11:39:05 - [34mdebug[39m: processFile
11:39:05 - [34mdebug[39m: fromDirectory
11:39:05 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "satici")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "satici")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



11:39:05 - [34mdebug[39m: fromDirectory
11:39:05 - [34mdebug[39m: isFileInNodeModuleDir
11:39:05 - [34mdebug[39m: processFile
11:39:05 - [34mdebug[39m: isFileInNodeModuleDir
11:39:05 - [34mdebug[39m: processFile
11:39:05 - [34mdebug[39m: isFileInNodeModuleDir
11:39:05 - [34mdebug[39m: processFile
11:39:05 - [34mdebug[39m: isFileInNodeModuleDir
11:39:05 - [34mdebug[39m: processFile
11:39:05 - [34mdebug[39m: isFileInNodeModuleDir
11:39:05 - [34mdebug[39m: processFile
11:39:05 - [34mdebug[39m: fromDirectory
11:39:05 - [34mdebug[39m: buildGrammar
11:39:05 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
11:39:05 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
11:39:05 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
11:39:05 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
11:39:05 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
11:39:05 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
11:39:05 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
11:39:05 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
11:39:05 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
11:39:05 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
11:39:05 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
11:39:05 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
11:39:05 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.example.satissozlesmesi.satisozlesmesi",
        contractId : "a34cafbb-9198-4a86-b2df-41c7f8b8a0ed",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satissozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.example.satissozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satisozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.example.satissozlesmesi.satisozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


CryptoMonetaryAmount -> Double  __  CryptoCurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.CryptoMonetaryAmount",
        doubleValue : data[0],
        cryptoCurrencyCode : data[2]
    };
}
%}


CryptoCurrencyCode -> "ADA" {% id %} | "BCH" {% id %} | "BTC" {% id %} | "DASH" {% id %} | "EOS" {% id %} | "ETC" {% id %} | "ETH" {% id %} | "LTC" {% id %} | "NEO" {% id %} | "XLM" {% id %} | "XMR" {% id %} | "XRP" {% id %} | "ZEC" {% id %} 


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
11:39:05 - [34mdebug[39m: fromDirectory
11:39:05 - [34mdebug[39m: fromDirectory
11:39:05 - [34mdebug[39m: Result of parsing: {"$class":"org.example.satissozlesmesi.satisozlesmesi","contractId":"a34cafbb-9198-4a86-b2df-41c7f8b8a0ed","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
11:39:05 - [34mdebug[39m: Setting clause data: {"$class":"org.example.satissozlesmesi.satisozlesmesi","contractId":"a34cafbb-9198-4a86-b2df-41c7f8b8a0ed","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
11:39:05 - [31merror[39m: Namespace is not defined for type org.accordproject.satissozlesmesi.confirmRequest
TypeNotFoundException: Namespace is not defined for type org.accordproject.satissozlesmesi.confirmRequest
    at ModelManager.getType (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/composer-common/lib/modelmanager.js:444:19)
    at Serializer.fromJSON (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/composer-common/lib/serializer.js:155:52)
    at Engine.execute (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-engine/lib/engine.js:203:55)
    at Template.fromDirectory.then (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/lib/commands.js:151:45)
    at <anonymous>
    at process._tickCallback (internal/process/next_tick.js:188:7)
11:39:05 - [32minfo[39m: undefined
12:48:44 - [32minfo[39m: Using current directory as template folder
12:48:44 - [32minfo[39m: Loading a default sample.txt file.
12:48:44 - [34mdebug[39m: fromDirectory
12:48:44 - [34mdebug[39m: fromDirectory
12:48:44 - [34mdebug[39m: fromDirectory
12:48:44 - [34mdebug[39m: fromDirectory
12:48:44 - [34mdebug[39m: fromDirectory
12:48:44 - [34mdebug[39m: fromDirectory
12:48:44 - [34mdebug[39m: fromDirectory
12:48:44 - [34mdebug[39m: constructor
12:48:44 - [34mdebug[39m: constructor
12:48:44 - [34mdebug[39m: isFileInNodeModuleDir
12:48:44 - [34mdebug[39m: isFileInNodeModuleDir
12:48:44 - [34mdebug[39m: isFileInNodeModuleDir
12:48:44 - [34mdebug[39m: isFileInNodeModuleDir
12:48:44 - [34mdebug[39m: processDirectory
12:48:44 - [34mdebug[39m: isFileInNodeModuleDir
12:48:44 - [34mdebug[39m: processFile
12:48:44 - [34mdebug[39m: isFileInNodeModuleDir
12:48:44 - [34mdebug[39m: processFile
12:48:44 - [34mdebug[39m: isFileInNodeModuleDir
12:48:44 - [34mdebug[39m: processFile
12:48:44 - [34mdebug[39m: isFileInNodeModuleDir
12:48:44 - [34mdebug[39m: processFile
12:48:44 - [34mdebug[39m: isFileInNodeModuleDir
12:48:44 - [34mdebug[39m: processFile
12:48:44 - [34mdebug[39m: fromDirectory
12:48:44 - [34mdebug[39m: isFileInNodeModuleDir
12:48:44 - [34mdebug[39m: processFile
12:48:44 - [34mdebug[39m: isFileInNodeModuleDir
12:48:44 - [34mdebug[39m: processFile
12:48:44 - [34mdebug[39m: isFileInNodeModuleDir
12:48:44 - [34mdebug[39m: processFile
12:48:46 - [34mdebug[39m: fromDirectory
12:48:46 - [34mdebug[39m: isFileInNodeModuleDir
12:48:46 - [34mdebug[39m: isFileInNodeModuleDir
12:48:46 - [34mdebug[39m: isFileInNodeModuleDir
12:48:46 - [34mdebug[39m: isFileInNodeModuleDir
12:48:46 - [34mdebug[39m: processDirectory
12:48:46 - [34mdebug[39m: isFileInNodeModuleDir
12:48:46 - [34mdebug[39m: processFile
12:48:46 - [34mdebug[39m: isFileInNodeModuleDir
12:48:46 - [34mdebug[39m: processFile
12:48:46 - [34mdebug[39m: isFileInNodeModuleDir
12:48:46 - [34mdebug[39m: processFile
12:48:46 - [34mdebug[39m: fromDirectory
12:48:47 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "satici")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "satici")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



12:48:47 - [34mdebug[39m: fromDirectory
12:48:47 - [34mdebug[39m: isFileInNodeModuleDir
12:48:47 - [34mdebug[39m: processFile
12:48:47 - [34mdebug[39m: isFileInNodeModuleDir
12:48:47 - [34mdebug[39m: processFile
12:48:47 - [34mdebug[39m: isFileInNodeModuleDir
12:48:47 - [34mdebug[39m: processFile
12:48:47 - [34mdebug[39m: isFileInNodeModuleDir
12:48:47 - [34mdebug[39m: processFile
12:48:47 - [34mdebug[39m: isFileInNodeModuleDir
12:48:47 - [34mdebug[39m: processFile
12:48:47 - [34mdebug[39m: fromDirectory
12:48:47 - [34mdebug[39m: buildGrammar
12:48:47 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
12:48:47 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
12:48:47 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
12:48:47 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
12:48:47 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
12:48:47 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
12:48:47 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
12:48:47 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
12:48:47 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
12:48:47 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
12:48:47 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
12:48:47 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
12:48:47 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.accordproject.satissozlesmesi.satissozlesmesi",
        contractId : "65edf15e-5f6f-48bc-8e2d-9958bcfa0116",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satissozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.satissozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


CryptoMonetaryAmount -> Double  __  CryptoCurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.CryptoMonetaryAmount",
        doubleValue : data[0],
        cryptoCurrencyCode : data[2]
    };
}
%}


CryptoCurrencyCode -> "ADA" {% id %} | "BCH" {% id %} | "BTC" {% id %} | "DASH" {% id %} | "EOS" {% id %} | "ETC" {% id %} | "ETH" {% id %} | "LTC" {% id %} | "NEO" {% id %} | "XLM" {% id %} | "XMR" {% id %} | "XRP" {% id %} | "ZEC" {% id %} 


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
12:48:47 - [34mdebug[39m: fromDirectory
12:48:47 - [34mdebug[39m: fromDirectory
12:48:47 - [34mdebug[39m: Result of parsing: {"$class":"org.accordproject.satissozlesmesi.satissozlesmesi","contractId":"65edf15e-5f6f-48bc-8e2d-9958bcfa0116","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
12:48:47 - [34mdebug[39m: Setting clause data: {"$class":"org.accordproject.satissozlesmesi.satissozlesmesi","contractId":"65edf15e-5f6f-48bc-8e2d-9958bcfa0116","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
12:48:47 - [32minfo[39m:
[33m{[39m
  [33m"[39m[32m$class[39m[33m"[39m[33m: [39m[33m"[39m[35morg.accordproject.satissozlesmesi.satissozlesmesi[39m[33m"[39m[33m,[39m
  [33m"[39m[32mcontractId[39m[33m"[39m[33m: [39m[33m"[39m[35m65edf15e-5f6f-48bc-8e2d-9958bcfa0116[39m[33m"[39m[33m,[39m
  [33m"[39m[32malici[39m[33m"[39m[33m: [39m[33m"[39m[35mumut[39m[33m"[39m[33m,[39m
  [33m"[39m[32msatici[39m[33m"[39m[33m: [39m[33m"[39m[35mserkan[39m[33m"[39m[33m,[39m
  [33m"[39m[32mprogname[39m[33m"[39m[33m: [39m[33m"[39m[35mprog[39m[33m"[39m[33m,[39m
  [33m"[39m[32musernum[39m[33m"[39m[33m: [39m[33m"[39m[35m2[39m[33m"[39m[33m,[39m
  [33m"[39m[32mmahkemebolge[39m[33m"[39m[33m: [39m[33m"[39m[35mankara[39m[33m"[39m
[33m}[39m
12:48:51 - [32minfo[39m: Using current directory as template folder
12:48:51 - [32minfo[39m: Loading a default sample.txt file.
12:48:51 - [32minfo[39m: Loading a single default request.json file.
12:48:51 - [32minfo[39m: Loading a default state.json file.
12:48:51 - [33mwarn[39m: A state file was not provided, generating default state object. Try the --state flag or create a state.json in the root folder of your template.
12:48:51 - [34mdebug[39m: fromDirectory
12:48:51 - [34mdebug[39m: fromDirectory
12:48:51 - [34mdebug[39m: fromDirectory
12:48:51 - [34mdebug[39m: fromDirectory
12:48:51 - [34mdebug[39m: fromDirectory
12:48:51 - [34mdebug[39m: fromDirectory
12:48:51 - [34mdebug[39m: fromDirectory
12:48:51 - [34mdebug[39m: constructor
12:48:51 - [34mdebug[39m: constructor
12:48:51 - [34mdebug[39m: isFileInNodeModuleDir
12:48:51 - [34mdebug[39m: isFileInNodeModuleDir
12:48:51 - [34mdebug[39m: isFileInNodeModuleDir
12:48:51 - [34mdebug[39m: isFileInNodeModuleDir
12:48:51 - [34mdebug[39m: processDirectory
12:48:51 - [34mdebug[39m: isFileInNodeModuleDir
12:48:51 - [34mdebug[39m: processFile
12:48:51 - [34mdebug[39m: isFileInNodeModuleDir
12:48:51 - [34mdebug[39m: processFile
12:48:51 - [34mdebug[39m: isFileInNodeModuleDir
12:48:51 - [34mdebug[39m: processFile
12:48:51 - [34mdebug[39m: isFileInNodeModuleDir
12:48:51 - [34mdebug[39m: processFile
12:48:51 - [34mdebug[39m: isFileInNodeModuleDir
12:48:51 - [34mdebug[39m: processFile
12:48:51 - [34mdebug[39m: fromDirectory
12:48:51 - [34mdebug[39m: isFileInNodeModuleDir
12:48:51 - [34mdebug[39m: processFile
12:48:51 - [34mdebug[39m: isFileInNodeModuleDir
12:48:51 - [34mdebug[39m: processFile
12:48:51 - [34mdebug[39m: isFileInNodeModuleDir
12:48:51 - [34mdebug[39m: processFile
12:48:53 - [34mdebug[39m: fromDirectory
12:48:53 - [34mdebug[39m: isFileInNodeModuleDir
12:48:53 - [34mdebug[39m: isFileInNodeModuleDir
12:48:53 - [34mdebug[39m: isFileInNodeModuleDir
12:48:53 - [34mdebug[39m: isFileInNodeModuleDir
12:48:53 - [34mdebug[39m: processDirectory
12:48:53 - [34mdebug[39m: isFileInNodeModuleDir
12:48:53 - [34mdebug[39m: processFile
12:48:53 - [34mdebug[39m: isFileInNodeModuleDir
12:48:53 - [34mdebug[39m: processFile
12:48:53 - [34mdebug[39m: isFileInNodeModuleDir
12:48:53 - [34mdebug[39m: processFile
12:48:53 - [34mdebug[39m: fromDirectory
12:48:53 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "satici")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "satici")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



12:48:53 - [34mdebug[39m: fromDirectory
12:48:53 - [34mdebug[39m: isFileInNodeModuleDir
12:48:53 - [34mdebug[39m: processFile
12:48:53 - [34mdebug[39m: isFileInNodeModuleDir
12:48:53 - [34mdebug[39m: processFile
12:48:53 - [34mdebug[39m: isFileInNodeModuleDir
12:48:53 - [34mdebug[39m: processFile
12:48:53 - [34mdebug[39m: isFileInNodeModuleDir
12:48:53 - [34mdebug[39m: processFile
12:48:53 - [34mdebug[39m: isFileInNodeModuleDir
12:48:53 - [34mdebug[39m: processFile
12:48:53 - [34mdebug[39m: fromDirectory
12:48:53 - [34mdebug[39m: buildGrammar
12:48:53 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
12:48:53 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
12:48:53 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
12:48:53 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
12:48:53 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
12:48:53 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
12:48:53 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
12:48:53 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
12:48:53 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
12:48:53 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
12:48:53 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
12:48:53 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
12:48:53 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.accordproject.satissozlesmesi.satissozlesmesi",
        contractId : "79460452-dd9c-463a-a221-9d06f4df84ef",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satissozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.satissozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


CryptoMonetaryAmount -> Double  __  CryptoCurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.CryptoMonetaryAmount",
        doubleValue : data[0],
        cryptoCurrencyCode : data[2]
    };
}
%}


CryptoCurrencyCode -> "ADA" {% id %} | "BCH" {% id %} | "BTC" {% id %} | "DASH" {% id %} | "EOS" {% id %} | "ETC" {% id %} | "ETH" {% id %} | "LTC" {% id %} | "NEO" {% id %} | "XLM" {% id %} | "XMR" {% id %} | "XRP" {% id %} | "ZEC" {% id %} 


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
12:48:54 - [34mdebug[39m: fromDirectory
12:48:54 - [34mdebug[39m: fromDirectory
12:48:54 - [34mdebug[39m: Result of parsing: {"$class":"org.accordproject.satissozlesmesi.satissozlesmesi","contractId":"79460452-dd9c-463a-a221-9d06f4df84ef","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
12:48:54 - [34mdebug[39m: Setting clause data: {"$class":"org.accordproject.satissozlesmesi.satissozlesmesi","contractId":"79460452-dd9c-463a-a221-9d06f4df84ef","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
12:48:54 - [34mdebug[39m: Engine processing request org.accordproject.satissozlesmesi.confirmRequest with state org.accordproject.cicero.contract.AccordContractState
12:48:54 - [34mdebug[39m: 
        __dispatch(contract,data,request,state,moment());

        function __dispatch(contract,data,request,state,now) {
            switch(request.getFullyQualifiedType()) {
        
            case 'org.example.satissozlesmesi.confirmRequest':
                let type0 = 'org.example.satissozlesmesi.confirmout';
                let ns0 = type0.substr(0, type0.lastIndexOf('.'));
                let clazz0 = type0.substr(type0.lastIndexOf('.')+1);
                let response0 = factory.newTransaction(ns0, clazz0);
                let context0 = {request: request, state: state, contract: contract, data: data, response: response0, emit: [], now: now};
                satissozlesmesi_satissozlesmesi(context0);
                return { response: context0.response, state: context0.state, emit: context0.emit };
            break;
            default:
                throw new Error('No function handler for ' + request.getFullyQualifiedType() );
            } // switch
            return 'oops';
        }
        
12:48:54 - [34mdebug[39m: 
        __init(contract,data,request,moment());

        function __init(contract,data,request,now) {
        
                return { response: serializer.fromJSON({ '$class': 'org.accordproject.cicero.runtime.Response' }, {validate: false, acceptResourcesForRelationships: true}), state: serializer.fromJSON({ '$class': 'org.accordproject.cicero.contract.AccordContractState', 'stateId' : 'org.accordproject.cicero.contract.AccordContractState#1' }, {validate: false, acceptResourcesForRelationships: true}), emit: [] };
        }
        
12:48:54 - [31merror[39m: No function handler for org.accordproject.satissozlesmesi.confirmRequest
Error: No function handler for org.accordproject.satissozlesmesi.confirmRequest
    at __dispatch (vm.js:759:23)
    at vm.js:744:9
    at ContextifyScript.Script.runInContext (vm.js:59:29)
    at VM.run (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/vm2/lib/main.js:211:72)
    at Engine.execute (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-engine/lib/engine.js:239:27)
    at Template.fromDirectory.then (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/lib/commands.js:151:45)
    at <anonymous>
    at process._tickCallback (internal/process/next_tick.js:188:7)
12:48:54 - [32minfo[39m: undefined
12:49:59 - [32minfo[39m: Using current directory as template folder
12:49:59 - [32minfo[39m: Loading a default sample.txt file.
12:49:59 - [32minfo[39m: Loading a single default request.json file.
12:49:59 - [32minfo[39m: Loading a default state.json file.
12:49:59 - [33mwarn[39m: A state file was not provided, generating default state object. Try the --state flag or create a state.json in the root folder of your template.
12:49:59 - [34mdebug[39m: fromDirectory
12:49:59 - [34mdebug[39m: fromDirectory
12:49:59 - [34mdebug[39m: fromDirectory
12:49:59 - [34mdebug[39m: fromDirectory
12:49:59 - [34mdebug[39m: fromDirectory
12:49:59 - [34mdebug[39m: fromDirectory
12:49:59 - [34mdebug[39m: fromDirectory
12:49:59 - [34mdebug[39m: constructor
12:49:59 - [34mdebug[39m: constructor
12:49:59 - [34mdebug[39m: isFileInNodeModuleDir
12:49:59 - [34mdebug[39m: isFileInNodeModuleDir
12:49:59 - [34mdebug[39m: isFileInNodeModuleDir
12:49:59 - [34mdebug[39m: isFileInNodeModuleDir
12:49:59 - [34mdebug[39m: processDirectory
12:49:59 - [34mdebug[39m: isFileInNodeModuleDir
12:49:59 - [34mdebug[39m: processFile
12:49:59 - [34mdebug[39m: isFileInNodeModuleDir
12:49:59 - [34mdebug[39m: processFile
12:49:59 - [34mdebug[39m: isFileInNodeModuleDir
12:49:59 - [34mdebug[39m: processFile
12:49:59 - [34mdebug[39m: isFileInNodeModuleDir
12:49:59 - [34mdebug[39m: processFile
12:49:59 - [34mdebug[39m: isFileInNodeModuleDir
12:49:59 - [34mdebug[39m: processFile
12:49:59 - [34mdebug[39m: fromDirectory
12:49:59 - [34mdebug[39m: isFileInNodeModuleDir
12:49:59 - [34mdebug[39m: processFile
12:49:59 - [34mdebug[39m: isFileInNodeModuleDir
12:49:59 - [34mdebug[39m: processFile
12:49:59 - [34mdebug[39m: isFileInNodeModuleDir
12:49:59 - [34mdebug[39m: processFile
12:50:02 - [34mdebug[39m: fromDirectory
12:50:02 - [34mdebug[39m: isFileInNodeModuleDir
12:50:02 - [34mdebug[39m: isFileInNodeModuleDir
12:50:02 - [34mdebug[39m: isFileInNodeModuleDir
12:50:02 - [34mdebug[39m: isFileInNodeModuleDir
12:50:02 - [34mdebug[39m: processDirectory
12:50:02 - [34mdebug[39m: isFileInNodeModuleDir
12:50:02 - [34mdebug[39m: processFile
12:50:02 - [34mdebug[39m: isFileInNodeModuleDir
12:50:02 - [34mdebug[39m: processFile
12:50:02 - [34mdebug[39m: isFileInNodeModuleDir
12:50:02 - [34mdebug[39m: processFile
12:50:02 - [34mdebug[39m: fromDirectory
12:50:02 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "satici")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "satici")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



12:50:02 - [34mdebug[39m: fromDirectory
12:50:02 - [34mdebug[39m: isFileInNodeModuleDir
12:50:02 - [34mdebug[39m: processFile
12:50:02 - [34mdebug[39m: isFileInNodeModuleDir
12:50:02 - [34mdebug[39m: processFile
12:50:02 - [34mdebug[39m: isFileInNodeModuleDir
12:50:02 - [34mdebug[39m: processFile
12:50:02 - [34mdebug[39m: isFileInNodeModuleDir
12:50:02 - [34mdebug[39m: processFile
12:50:02 - [34mdebug[39m: isFileInNodeModuleDir
12:50:02 - [34mdebug[39m: processFile
12:50:02 - [34mdebug[39m: fromDirectory
12:50:02 - [34mdebug[39m: buildGrammar
12:50:02 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
12:50:02 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
12:50:02 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
12:50:02 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
12:50:02 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
12:50:02 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
12:50:02 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
12:50:02 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
12:50:02 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
12:50:02 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
12:50:02 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
12:50:02 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
12:50:02 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.accordproject.satissozlesmesi.satissozlesmesi",
        contractId : "f03bc478-9094-439f-99df-04c04befaf1d",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satissozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.satissozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


CryptoMonetaryAmount -> Double  __  CryptoCurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.CryptoMonetaryAmount",
        doubleValue : data[0],
        cryptoCurrencyCode : data[2]
    };
}
%}


CryptoCurrencyCode -> "ADA" {% id %} | "BCH" {% id %} | "BTC" {% id %} | "DASH" {% id %} | "EOS" {% id %} | "ETC" {% id %} | "ETH" {% id %} | "LTC" {% id %} | "NEO" {% id %} | "XLM" {% id %} | "XMR" {% id %} | "XRP" {% id %} | "ZEC" {% id %} 


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
12:50:03 - [34mdebug[39m: fromDirectory
12:50:03 - [34mdebug[39m: fromDirectory
12:50:03 - [34mdebug[39m: Result of parsing: {"$class":"org.accordproject.satissozlesmesi.satissozlesmesi","contractId":"f03bc478-9094-439f-99df-04c04befaf1d","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
12:50:03 - [34mdebug[39m: Setting clause data: {"$class":"org.accordproject.satissozlesmesi.satissozlesmesi","contractId":"f03bc478-9094-439f-99df-04c04befaf1d","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
12:50:03 - [31merror[39m: Namespace is not defined for type org.accordproject.satissozlesmesi
TypeNotFoundException: Namespace is not defined for type org.accordproject.satissozlesmesi
    at ModelManager.getType (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/composer-common/lib/modelmanager.js:444:19)
    at Serializer.fromJSON (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/composer-common/lib/serializer.js:155:52)
    at Engine.execute (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-engine/lib/engine.js:203:55)
    at Template.fromDirectory.then (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/lib/commands.js:151:45)
    at <anonymous>
    at process._tickCallback (internal/process/next_tick.js:188:7)
12:50:03 - [32minfo[39m: undefined
12:52:06 - [32minfo[39m: Using current directory as template folder
12:52:06 - [32minfo[39m: Loading a default sample.txt file.
12:52:06 - [32minfo[39m: Loading a single default request.json file.
12:52:06 - [32minfo[39m: Loading a default state.json file.
12:52:06 - [33mwarn[39m: A state file was not provided, generating default state object. Try the --state flag or create a state.json in the root folder of your template.
12:52:06 - [34mdebug[39m: fromDirectory
12:52:06 - [34mdebug[39m: fromDirectory
12:52:06 - [34mdebug[39m: fromDirectory
12:52:06 - [34mdebug[39m: fromDirectory
12:52:06 - [34mdebug[39m: fromDirectory
12:52:06 - [34mdebug[39m: fromDirectory
12:52:06 - [34mdebug[39m: fromDirectory
12:52:06 - [34mdebug[39m: constructor
12:52:06 - [34mdebug[39m: constructor
12:52:06 - [34mdebug[39m: isFileInNodeModuleDir
12:52:06 - [34mdebug[39m: isFileInNodeModuleDir
12:52:06 - [34mdebug[39m: isFileInNodeModuleDir
12:52:06 - [34mdebug[39m: isFileInNodeModuleDir
12:52:06 - [34mdebug[39m: processDirectory
12:52:06 - [34mdebug[39m: isFileInNodeModuleDir
12:52:06 - [34mdebug[39m: processFile
12:52:06 - [34mdebug[39m: isFileInNodeModuleDir
12:52:06 - [34mdebug[39m: processFile
12:52:06 - [34mdebug[39m: isFileInNodeModuleDir
12:52:06 - [34mdebug[39m: processFile
12:52:06 - [34mdebug[39m: isFileInNodeModuleDir
12:52:06 - [34mdebug[39m: processFile
12:52:06 - [34mdebug[39m: isFileInNodeModuleDir
12:52:06 - [34mdebug[39m: processFile
12:52:06 - [34mdebug[39m: fromDirectory
12:52:06 - [34mdebug[39m: isFileInNodeModuleDir
12:52:06 - [34mdebug[39m: processFile
12:52:06 - [34mdebug[39m: isFileInNodeModuleDir
12:52:06 - [34mdebug[39m: processFile
12:52:06 - [34mdebug[39m: isFileInNodeModuleDir
12:52:06 - [34mdebug[39m: processFile
12:52:08 - [34mdebug[39m: fromDirectory
12:52:08 - [34mdebug[39m: isFileInNodeModuleDir
12:52:08 - [34mdebug[39m: isFileInNodeModuleDir
12:52:08 - [34mdebug[39m: isFileInNodeModuleDir
12:52:08 - [34mdebug[39m: isFileInNodeModuleDir
12:52:08 - [34mdebug[39m: processDirectory
12:52:08 - [34mdebug[39m: isFileInNodeModuleDir
12:52:08 - [34mdebug[39m: processFile
12:52:08 - [34mdebug[39m: isFileInNodeModuleDir
12:52:08 - [34mdebug[39m: processFile
12:52:08 - [34mdebug[39m: isFileInNodeModuleDir
12:52:08 - [34mdebug[39m: processFile
12:52:08 - [34mdebug[39m: fromDirectory
12:52:08 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "satici")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "satici")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



12:52:08 - [34mdebug[39m: fromDirectory
12:52:08 - [34mdebug[39m: isFileInNodeModuleDir
12:52:08 - [34mdebug[39m: processFile
12:52:08 - [34mdebug[39m: isFileInNodeModuleDir
12:52:08 - [34mdebug[39m: processFile
12:52:08 - [34mdebug[39m: isFileInNodeModuleDir
12:52:08 - [34mdebug[39m: processFile
12:52:08 - [34mdebug[39m: isFileInNodeModuleDir
12:52:08 - [34mdebug[39m: processFile
12:52:08 - [34mdebug[39m: isFileInNodeModuleDir
12:52:08 - [34mdebug[39m: processFile
12:52:08 - [34mdebug[39m: fromDirectory
12:52:08 - [34mdebug[39m: buildGrammar
12:52:08 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
12:52:08 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
12:52:08 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
12:52:08 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
12:52:08 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
12:52:08 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
12:52:08 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
12:52:08 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
12:52:08 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
12:52:08 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
12:52:08 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
12:52:08 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
12:52:08 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.accordproject.satissozlesmesi.satissozlesmesi",
        contractId : "453ffc9f-ddf6-4d28-9dc2-b346afba2a7f",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satissozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.satissozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


CryptoMonetaryAmount -> Double  __  CryptoCurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.CryptoMonetaryAmount",
        doubleValue : data[0],
        cryptoCurrencyCode : data[2]
    };
}
%}


CryptoCurrencyCode -> "ADA" {% id %} | "BCH" {% id %} | "BTC" {% id %} | "DASH" {% id %} | "EOS" {% id %} | "ETC" {% id %} | "ETH" {% id %} | "LTC" {% id %} | "NEO" {% id %} | "XLM" {% id %} | "XMR" {% id %} | "XRP" {% id %} | "ZEC" {% id %} 


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
12:52:09 - [34mdebug[39m: fromDirectory
12:52:09 - [34mdebug[39m: fromDirectory
12:52:09 - [34mdebug[39m: Result of parsing: {"$class":"org.accordproject.satissozlesmesi.satissozlesmesi","contractId":"453ffc9f-ddf6-4d28-9dc2-b346afba2a7f","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
12:52:09 - [34mdebug[39m: Setting clause data: {"$class":"org.accordproject.satissozlesmesi.satissozlesmesi","contractId":"453ffc9f-ddf6-4d28-9dc2-b346afba2a7f","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
12:52:09 - [31merror[39m: Namespace is not defined for type org.accordproject.satissozlesmesi
TypeNotFoundException: Namespace is not defined for type org.accordproject.satissozlesmesi
    at ModelManager.getType (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/composer-common/lib/modelmanager.js:444:19)
    at Serializer.fromJSON (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/composer-common/lib/serializer.js:155:52)
    at Engine.execute (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-engine/lib/engine.js:203:55)
    at Template.fromDirectory.then (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/lib/commands.js:151:45)
    at <anonymous>
    at process._tickCallback (internal/process/next_tick.js:188:7)
12:52:09 - [32minfo[39m: undefined
12:55:24 - [32minfo[39m: Using current directory as template folder
12:55:24 - [32minfo[39m: Loading a default sample.txt file.
12:55:24 - [32minfo[39m: Loading a single default request.json file.
12:55:24 - [32minfo[39m: Loading a default state.json file.
12:55:24 - [33mwarn[39m: A state file was not provided, generating default state object. Try the --state flag or create a state.json in the root folder of your template.
12:55:24 - [34mdebug[39m: fromDirectory
12:55:24 - [34mdebug[39m: fromDirectory
12:55:24 - [34mdebug[39m: fromDirectory
12:55:24 - [34mdebug[39m: fromDirectory
12:55:24 - [34mdebug[39m: fromDirectory
12:55:24 - [34mdebug[39m: fromDirectory
12:55:24 - [34mdebug[39m: fromDirectory
12:55:24 - [34mdebug[39m: constructor
12:55:24 - [34mdebug[39m: constructor
12:55:24 - [34mdebug[39m: isFileInNodeModuleDir
12:55:24 - [34mdebug[39m: isFileInNodeModuleDir
12:55:24 - [34mdebug[39m: isFileInNodeModuleDir
12:55:24 - [34mdebug[39m: isFileInNodeModuleDir
12:55:24 - [34mdebug[39m: processDirectory
12:55:24 - [34mdebug[39m: isFileInNodeModuleDir
12:55:24 - [34mdebug[39m: processFile
12:55:24 - [34mdebug[39m: isFileInNodeModuleDir
12:55:24 - [34mdebug[39m: processFile
12:55:24 - [34mdebug[39m: isFileInNodeModuleDir
12:55:24 - [34mdebug[39m: processFile
12:55:24 - [34mdebug[39m: isFileInNodeModuleDir
12:55:24 - [34mdebug[39m: processFile
12:55:24 - [34mdebug[39m: isFileInNodeModuleDir
12:55:24 - [34mdebug[39m: processFile
12:55:24 - [34mdebug[39m: fromDirectory
12:55:24 - [34mdebug[39m: isFileInNodeModuleDir
12:55:24 - [34mdebug[39m: processFile
12:55:24 - [34mdebug[39m: isFileInNodeModuleDir
12:55:24 - [34mdebug[39m: processFile
12:55:24 - [34mdebug[39m: isFileInNodeModuleDir
12:55:24 - [34mdebug[39m: processFile
12:55:28 - [34mdebug[39m: fromDirectory
12:55:28 - [34mdebug[39m: isFileInNodeModuleDir
12:55:28 - [34mdebug[39m: isFileInNodeModuleDir
12:55:28 - [34mdebug[39m: isFileInNodeModuleDir
12:55:28 - [34mdebug[39m: isFileInNodeModuleDir
12:55:28 - [34mdebug[39m: processDirectory
12:55:28 - [34mdebug[39m: isFileInNodeModuleDir
12:55:28 - [34mdebug[39m: processFile
12:55:28 - [34mdebug[39m: isFileInNodeModuleDir
12:55:28 - [34mdebug[39m: processFile
12:55:28 - [34mdebug[39m: isFileInNodeModuleDir
12:55:28 - [34mdebug[39m: processFile
12:55:28 - [34mdebug[39m: fromDirectory
12:55:28 - [34mdebug[39m: Compiled Ergo to Javascript:
/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* Initialize inheritance */
var inheritance = null;
/* "standard library" (implementation of unary and binary operators) */
function unwrap(doc) {
    // Unwrap for Enhanced TxStore format
    if ("state" in doc && !("$class" in doc)) {
        if (doc.state == "COMMITTED")
            return JSON.parse(doc.currentValue);
        else
            return null; // Not sure if we will need something more fancy for un-committed data
    }
    // Leave as-is
    else
        return doc;
}
function concat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2)
        if (!(key2 in r1))
            result[key2] = r2[key2];
    return result;
}
function contains(v, b) {
    for (var i=0; i<b.length; i++)
        if (equal(v, toLeft(b[i])))
            return true;
    return false;
}
function distinct(b) {
    var result = [ ];
    for (var i=0; i<b.length; i++) {
        var v = b[i];
        var dup = false;
        for (var j=0; j<result.length;j++) {
            if (equal(v,result[j])) { dup = true; break; }
        }
        if (!(dup)) { result.push(v); } else { dup = false; }
    }
    return result;
}
function fastdistinct(b) {
    b1 = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    b1.sort(compare);
    var result = [ ];
    var v1 = null;
    var v2 = null;
    for (var i=0; i<b1.length; i++) {
        var v1 = b1[i];
        if (i == (b1.length -1)) {
            result.push(v1);
        }
        else {
            v2 = b1[i+1];
            if (equal(v1,v2)) {
            } else {
                result.push(v1);
            }
            v1 = v2;
        }
    }
    return result;
}
function compare(v1, v2) {
    var t1 = typeof v1, t2 = typeof v2;
    if (t1 != t2)
        return t1 < t2 ? -1 : +1;
    var a1 = {}.toString.apply(v1), a2 = {}.toString.apply(v2);
    if (a1 != a2)
        return a1 < a2 ? -1 : +1;
    if (a1 == "[object Array]") {
        v1 = v1.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
        v2 = v2.slice(); /* So we do the sort/compare on a clone of the original array */
        v1.sort(compare);
        v2.sort(compare);
    }
    if (t1 == "object") {
        var fields1 = [];
        var fields2 = [];
        for (var f1 in v1) { fields1.push(f1); }
        for (var f2 in v2) { fields2.push(f2); }
        fields1 = fields1.sort(compare);
        fields2 = fields2.sort(compare);
        for (var i = 0; i < fields1.length; i++) {
            if (!(fields1[i] in v2))
                return -1;
            var fc = compare(v1[fields1[i]], v2[fields1[i]]);
            if (fc != 0)
                return fc;
        }
        for (var i = 0; i < fields2.length; i++) {
            if (!(fields2[i] in v1))
                return +1;
        }
        return 0;
    }
    if (v1 != v2)
        return v1 < v2 ? -1 : +1;
    return 0;
}
function equal(v1, v2) {
    return compare(v1, v2) == 0;
}
function compareOfMultipleCriterias(scl) {
    return function(a,b) {
        var current_compare = 0;
        for (var i=0; i<scl.length; i++) {
            var sc = scl[i];
            if ("asc" in sc) { current_compare = compare(deref(a,sc['asc']), deref(b,sc['asc'])); }
            else if ("desc" in sc) { current_compare = -(compare(deref(a,sc['asc']), deref(b,sc['asc']))); }

            if (current_compare == -1) { return -1; }
            else if(current_compare == 1) { return 1; }
        }
        return current_compare;
    }
    
}
function sort(b,scl) {
    var result = [ ];
    if (scl.length == 0) { return b; } // Check for no sorting criteria
    var compareFun = compareOfMultipleCriterias(scl);
    result = b.slice(); /* Sorting in place leads to inconsistencies, notably as it re-orders the input WM in the middle of processing */
    result.sort(compareFun);
    return result;
}
function flatten(aOuter) {
    var result = [ ];
    for (var iOuter=0, nOuter=aOuter.length; iOuter<nOuter; iOuter++) {
        var aInner = aOuter[iOuter];
        for (var iInner=0, nInner=aInner.length; iInner<nInner; iInner++)
            result.push(aInner[iInner]);
    }
    return result;
}
function mergeConcat(r1, r2) {
    var result = { };
    for (var key1 in r1)
        result[key1] = r1[key1];
    for (var key2 in r2) {
        if (key2 in r1) {
            if (!equal(r1[key2], r2[key2])) {
                return [ ];
            }
        } else {
            result[key2] = r2[key2];
        }
    }
    return [ result ];
}
function project(r1, p2) {
    var result = { };
    for (var key1 in r1) {
        if (!(p2.indexOf(key1) == -1))
            result[key1] = r1[key1];
    }
    return result;
}
function remove(r, f) {
    var result = { };
    for (var key in r)
        if (key != f)
            result[key] = r[key];
    return result;
}
function sum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i];
    return result;
}
function arithMean(b) {
    var len = b.length;
    if(len == 0) {
        return 0;
    } else {
        return sum(b)/len;
    }
}
function toString(v) {
    return toStringQ(v, "");
}
function toStringQ(v, quote) {
    if (v === null)
        return "null";
    var t = typeof v;
    if (t == "string")
        return quote + v + quote;
    if (t == "boolean")
        return "" + v;
    if (t == "number") {
        if (Math.floor(v) == v) return (new Number(v)).toFixed(1); // Make sure there is always decimal point
        else return "" + v;
    }
    if ({}.toString.apply(v) == "[object Array]") {
        v = v.slice();
        v.sort();
        var result = "[";
        for (var i=0, n=v.length; i<n; i++) {
            if (i > 0)
                result += ", ";
            result += toStringQ(v[i], quote);
        }
        return result + "]";
    }
    if(v.hasOwnProperty('nat')){
        return "" + v.nat;
    }
    var result2 = "{";
    var first = true;
    for (var key in v) {
        if (first) first = false; else result2 += ", ";
        result2 += toStringQ(key, quote) + ": " + toStringQ(v[key], quote);
    }
    return result2 + "}";
}
function bunion(b1, b2) {
    var result = [ ];
    for (var i1=0; i1<b1.length; i1++)
        result.push(b1[i1]);
    for (var i2=0; i2<b2.length; i2++)
        result.push(b2[i2]);
    return result;
}
function bminus(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == (-1)) { result.push(v1[i1]); } else { i2++; }
        } else {
            result.push(v1[i1]);
        }
    }
    return result;
}
function bmin(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) i2++;
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) result.push(v1[i1]);
        }
    }
    return result;
}
function bmax(b1, b2) {
    var result = [ ];
    var v1 = b1.slice();
    var v2 = b2.slice();
    v1.sort(compare);
    v2.sort(compare);
    var i2=0;
    var length2=v2.length;
    var comp=0;
    for (var i1=0; i1<v1.length; i1++) {
        while ((i2 < length2) && (compare(v1[i1],v2[i2]) == 1)) { result.push(v2[i2]); i2++; }
        if (i2 < length2) {
            if(compare(v1[i1],v2[i2]) == 0) i2++;
        }
        result.push(v1[i1]);
    }
    while (i2 < length2) { result.push(v2[i2]); i2++; }
    return result;
}
function sub_brand(b1,b2) {
    var bsub=null;
    var bsup=null;
    var inh = [];
    if (inheritance) { inh = inheritance; };
    for (var i=0; i<inh.length; i++) {
        bsub = inh[i].sub;
        bsup = inh[i].sup;
        if ((b1 == bsub) && (b2 == bsup)) return true;
    }
    return false;
}
function left(v) {
    return { left : v };
}
function right(v) {
    return { right : v };
}
function mustBeArray(obj) {
    if (Array.isArray(obj))
        return;
    var e = new Error("Expected an array but got: " + JSON.stringify(obj));
    throw e;
}
function cast(brands,v) {
    //logger.info("CASTING: "+brands[0]);
    //logger.info("FOR OBJECT: "+JSON.stringify(v));
    mustBeArray(brands);
    if ("$class" in v)
        return enhanced_cast(brands,v);
    var type = v.type;
    mustBeArray(type);
    if (brands.length == 1 && brands[0] == "Any") { /* cast to top of inheritance is built-in */
        return left(v);
    }
    brands:
    for (var i in brands) {
        var b = brands[i];
        for (var j in type) {
            var t = type[j];
            if (equal(t,b) || sub_brand(t,b))
                continue brands;
        }
        /* the brand b does not appear in the type, so the cast fails */
        return right(null);
    }
    /* All brands appear in the type, so the cast succeeds */
    return left(v);
}
function enhanced_cast(brands,v) {
    var type = v.$class;
    if (brands.length != 1)
        throw "Can't handle multiple brands yet";
    var brand = brands[0];
    if (brand == type || brand == "Any" || sub_brand(type, brand)) {
        return left(v);
    }
    return right(null);
}
function singleton(v) {
    if (v.length == 1) {
        return left(v[0]);
    } else {
        return right(null); /* Not a singleton */
    }
}
function unbrand(v) {
    if (typeof v === "object")
        if ("$class" in v) {
            return remove(v,"$class");
        } else {
            return ("data" in v) ? v.data : v;
        }
    throw "TypeError: unbrand called on non-object";
}
function brand(b,v) {
    v['$class'] = b[0];
    return v
}
function either(v) {
    if (v == null)
        return false;
    if (typeof v === "object")
        return !("right" in v);
    return true;
}
function toLeft(v) {
    if (typeof v === "object") {
        if ("left" in v)
            return v.left;
        if ("$value" in v)
            return v.$value;
        if (looksLikeRelationship(v))
            return v["key"];
    }
    return v;
}
function toRight(v) {
    if (v === null)
        return null;
    if (typeof v === "object" && "right" in v)
        return v.right;
    return undefined;
}
function deref(receiver, member) {
    if (typeof receiver === "object" && member in receiver) {
        var ans = receiver[member];
        if (ans === null) {
            return null;
        }
        if (typeof ans === "object" && looksLikeRelationship(ans))
            ans = left(ans["key"]);
        if (("$class" in receiver) && typeof ans === "object" && !("left" in ans) && !Array.isArray(ans))
            ans = left(ans);
        return ans;
    }
    return undefined;
}
function looksLikeRelationship(v) {
    // As the name suggests, this is only heuristic.  We call it a relationship if it has two or three members.
    // A "key" and "type" member must be among those.   A third member, if present, must be $class and must denote
    // the relationship class.
    var hasKey = false;
    var hasType = false;
    for (var member in v)
        if (member == "key")
            hasKey = true;
    else if (member == "type")
        hasType = true;
    else if (member == "$class" && v["$class"] == "com.ibm.ia.model.Relationship")
        continue;
    else
        return false;
    return hasKey && hasType;
}
function mkWorld(v) {
    return { "WORLD" : v };
}

// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FRegular_Expressions
function escapeRegExp(string){
    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
}

// Nat operations

function natPlus(v1, v2) {
    return { "nat" : v1.nat + v2.nat };
}
function natMinus(v1, v2) {
    return { "nat" : v1.nat - v2.nat };
}
function natMult(v1, v2) {
    return { "nat" : v1.nat * v2.nat };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natDiv(v1, v2) {
    return { "nat" : Math.floor(v1.nat / v2.nat) };
}
function natRem(v1, v2) {
    return { "nat" : Math.floor(v1.nat % v2.nat) };
}
function natMin(v1, v2) {
    return { "nat" : Math.min(v1.nat,v2.nat) };
}
function natMax(v1, v2) {
    return { "nat" : Math.max(v1.nat,v2.nat) };
}
function natAbs(v) {
    return { "nat" : Math.abs(v.nat) };
}
function natLog2(v) {
    return { "nat" : Math.floor(Math.log2(v.nat)) }; // Default Z.log2 is log_inf, biggest integer lower than log2
}
function natSqrt(v) {
    return { "nat" : Math.floor(Math.sqrt(v.nat)) }; // See Z.sqrt biggest integer lower than sqrt
}
function natSum(b) {
    var result = 0;
    for (var i=0; i<b.length; i++)
        result += b[i].nat;
    return { "nat" : result };
}
function natMinApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.min.apply(Math,numbers) };
}
function natMaxApply(b) {
    var numbers = [ ];
    for (var i=0; i<b.length; i++)
        numbers.push(b[i].nat);
    return { "nat" : Math.max.apply(Math,numbers) };
}
function natArithMean(b) {
    var len = b.length;
    if(len == 0) {
        return { "nat" : 0 };
    } else {
        return { "nat" : Math.floor(natSum(b)/len) };
    }
}
function count(v) {
    //return { "nat" : v.length };
    return v.length; /* XXX To be fixed */
}
function floatOfNat(v) {
    return v.nat;
}
function substring(v, start, len) {
    return v.substring(start,len);
}
function substringNoLength(v, start) {
    return v.substring(start);
}
/* Addendum to for dateTime and duration */

var DAY = "day";
var MONTH = "month";
var QUARTER = "quarter";
var YEAR = "year";

function dateTimeComponent(part, date) {
    date = mustBeDate(date);
    switch(part) {
    case DAY:
        return date.dayOfMonth();
    case MONTH:
        return date.month();
    case YEAR:
        return date.year();
    case QUARTER:
        return date.quarter();
    default:
        throw new Error("Unknown date part: " + part);
    }
}

function dateTimeFromString(stringDate) {
    return moment(stringDate);
}

function dateTimeDurationFromString(stringDuration) {
    // TODO verify what the string format for durations is going to be.
    // Here we assume a number adjoined to a valid unit with a dash.
    if (typeof stringDuration === "string") {
	      parts = stringDuration.split("-");
	      if (parts.length === 2) {
	          mustBeUnit(parts[1]);
            return moment.duration(parseFloat(parts[0]),parts[1]+"s");
        }
    }
    throw new Error("Not well formed duration input: " + stringDuration);
}

function dateTimePointPlus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.add(duration);
}

function dateTimePointMinus(date, duration) {
    date = mustBeDate(date);
    duration = mustBeDuration(duration);
    return date.substract(duration);
}

function dateTimePointNe(date1, date2) {
    return compareDates(date1, date2) != 0;
}

function dateTimePointLt(date1, date2) {
    return compareDates(date1,date2) < 0;
}

function dateTimePointLe(date1, date2) {
    return compareDates(date1, date2) <= 0;
}

function dateTimePointGt(date1, date2) {
    return compareDates(date1, date2) > 0;
}

function dateTimePointGe(date1, date2) {
    return compareDates(date1, date2) >= 0;
}

function dateTimeDurationDays(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'days');
}
function dateTimeDurationSeconds(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    return date1.diff(date2,'seconds');
}

function compareDates(date1, date2) {
    date1 = mustBeDate(date1);
    date2 = mustBeDate(date2);
    if (date1.isBefore(date2)) {
        return -1;
    } else if (date1.isAfter(date2)) {
        return 1;
    } else if (date1.isSame(date2)) {
        return 0;
    }
    throw new Error("Unexpected failure: compareDates")
}

function dateNewYear(date, year) {
    date = mustBeDate(date);
    return date.year(year);
}

function dateNewMonth(date, month) {
    date = mustBeDate(date);
    return date.month(month);
}

function dateNewDay(date, day) {
    date = mustBeDate(date);
    return date.day(day);
}

function makeDate(year, month, day) {
    return moment({ 'year' :year, 'month' :month, 'day' :day });
}

function mustBeDate(date) {
    if (typeof date == "string") {
        return moment(date);
    } else {
        return date.clone();
    }
}

function mustBeDuration(duration) {
    if (typeof duration == "string") {
        return moment.duration(duration);
    } else {
        return duration.clone();
    }
}

function mustBeUnit(unit) {
    if (unit === DAY || unit === MONTH || unit === QUARTER || unit === YEAR)
	      return;
    throw new Error("Expected a duration unit but got " + JSON.stringify(unit));
}

'use strict';
/*eslint-disable no-unused-vars*/
/*eslint-disable no-undef*/
/*eslint-disable no-var*/


/**
 * Execute the smart clause
 * @param {Context} context - the Accord context
 * @param {org.example.satissozlesmesi.confirmRequest} context.request - the incoming request
 * @param {org.example.satissozlesmesi.confirmout} context.response - the response
 * @param {org.hyperledger.composer.system.Event} context.emit - the emitted events
 * @param {org.accordproject.cicero.contract.AccordContractState} context.state - the state
 * @AccordClauseLogic
 */
function satissozlesmesi_satissozlesmesi(context) {
  let pcontext = { 'request' : serializer.toJSON(context.request,{permitResourcesForRelationships:true}), 'state': serializer.toJSON(context.state,{permitResourcesForRelationships:true}), 'contract': serializer.toJSON(context.contract,{permitResourcesForRelationships:true}), 'emit': context.emit, 'now': context.now};
  //logger.info('ergo context: '+JSON.stringify(pcontext))
  let result = new satissozlesmesi().satissozlesmesi(pcontext);
  if (result.hasOwnProperty('left')) {
    //logger.info('ergo result: '+JSON.stringify(result))
    context.response = serializer.fromJSON(result.left.response, {validate: false, acceptResourcesForRelationships: true},{permitResourcesForRelationships:true});
    context.state = serializer.fromJSON(result.left.state, {validate: false, acceptResourcesForRelationships: true});
    let emitResult = [];
    for (let i = 0; i < result.left.emit.length; i++) {
      emitResult.push(serializer.fromJSON(result.left.emit[i], {validate: false, acceptResourcesForRelationships: true}));
    }
    context.emit = emitResult;
    return context;
  } else {
    throw new Error(result.right);
  }
}
class satissozlesmesi {
  main(context) {
    var vcontract = deref(context, "contract");
    var vrequest = deref(context, "request");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit_0 = vemit;
    var vX$match0 = vrequest;
    var res1 = null;
    if (either(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0))) {
      var vX$case0 = null;
      vX$case0 = toLeft(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"left" : {"$main": vX$case0}};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(cast(["org.example.satissozlesmesi.confirmRequest"],vX$match0));
      res1 = {"right" : null};
    }
    var res2 = null;
    if (either(res1)) {
      var vX$case0_0 = null;
      vX$case0_0 = toLeft(res1);
      var vX$case0 = vX$case0_0;
      var vX$main = deref(vX$case0, "$main");
      var vrequest_0 = vX$main;
      var vemit_0 = vlemit_0;
      var vstate_0 = vlstate_0;
      var vcontract_0 = vcontract;
      var vlstate = vstate_0;
      var vlemit = vemit_0;
      res2 = {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract_0), "satici")})}))};
    } else {
      var vX$case1 = null;
      vX$case1 = toRight(res1);
      res2 = {"right" : brand(["org.example.satissozlesmesi.Error"],{"message": ""})};
    }
    return res2;
  }
  init(context) {
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate_0 = vstate;
    var vlemit = vemit;
    var vlstate = {"$class": "org.accordproject.cicero.contract.AccordContractState", "stateId": "1"};
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": {"$class": "org.accordproject.cicero.runtime.Response"}}))};
  }
  satissozlesmesi(context) {
    var vcontract = deref(context, "contract");
    var vemit = deref(context, "emit");
    var vstate = deref(context, "state");
    var vlstate = vstate;
    var vlemit = vemit;
    return {"left" : concat({"emit": vlemit}, concat({"state": vlstate}, {"response": brand(["org.example.satissozlesmesi.confirmout"],{"output": deref(unbrand(vcontract), "satici")})}))};
  }
}

/*eslint-enable no-unused-vars*/
/*eslint-enable no-undef*/



12:55:28 - [34mdebug[39m: fromDirectory
12:55:28 - [34mdebug[39m: isFileInNodeModuleDir
12:55:28 - [34mdebug[39m: processFile
12:55:28 - [34mdebug[39m: isFileInNodeModuleDir
12:55:28 - [34mdebug[39m: processFile
12:55:28 - [34mdebug[39m: isFileInNodeModuleDir
12:55:28 - [34mdebug[39m: processFile
12:55:28 - [34mdebug[39m: isFileInNodeModuleDir
12:55:28 - [34mdebug[39m: processFile
12:55:28 - [34mdebug[39m: isFileInNodeModuleDir
12:55:28 - [34mdebug[39m: processFile
12:55:28 - [34mdebug[39m: fromDirectory
12:55:28 - [34mdebug[39m: buildGrammar
12:55:28 - [34mdebug[39m: Template AST {"type":"ContractTemplate","data":[{"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1},{"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}},{"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27},{"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}},{"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28},{"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}},{"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22},{"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}},{"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30},{"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}},{"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}]}
12:55:28 - [34mdebug[39m: element rule0 {"type":"Chunk","value":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  ","text":"DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  [{","offset":0,"lineBreaks":5,"line":1,"col":1}
12:55:28 - [34mdebug[39m: element rule1 {"type":"Binding","fieldName":{"type":"varid","value":"alici","text":"alici","offset":79,"lineBreaks":0,"line":6,"col":20}}
12:55:28 - [34mdebug[39m: element rule2 {"type":"Chunk","value":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. ","text":" (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. [{","offset":86,"lineBreaks":2,"line":6,"col":27}
12:55:28 - [34mdebug[39m: element rule3 {"type":"Binding","fieldName":{"type":"varid","value":"satici","text":"satici","offset":147,"lineBreaks":0,"line":8,"col":20}}
12:55:28 - [34mdebug[39m: element rule4 {"type":"Chunk","value":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: ","text":"  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: [{","offset":155,"lineBreaks":4,"line":8,"col":28}
12:55:28 - [34mdebug[39m: element rule5 {"type":"Binding","fieldName":{"type":"varid","value":"progname","text":"progname","offset":231,"lineBreaks":0,"line":12,"col":12}}
12:55:28 - [34mdebug[39m: element rule6 {"type":"Chunk","value":"          \n\nKullanıcı Sayısı: ","text":"          \n\nKullanıcı Sayısı: [{","offset":241,"lineBreaks":2,"line":12,"col":22}
12:55:28 - [34mdebug[39m: element rule7 {"type":"Binding","fieldName":{"type":"varid","value":"usernum","text":"usernum","offset":273,"lineBreaks":0,"line":14,"col":21}}
12:55:28 - [34mdebug[39m: element rule8 {"type":"Chunk","value":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde ","text":" \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde [{","offset":282,"lineBreaks":80,"line":14,"col":30}
12:55:28 - [34mdebug[39m: element rule9 {"type":"Binding","fieldName":{"type":"varid","value":"mahkemebolge","text":"mahkemebolge","offset":4604,"lineBreaks":0,"line":94,"col":53}}
12:55:28 - [34mdebug[39m: element rule10 {"type":"LastChunk","value":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","text":"  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n","offset":4618,"lineBreaks":10,"line":94,"col":67}
12:55:28 - [34mdebug[39m: Generated template grammar# Dynamically Generated
@builtin "number.ne"
@builtin "string.ne"
@builtin "whitespace.ne"
@{%
    function compact(v) {
        if (Array.isArray(v)) {
            return v.reduce((a, v) => (v === null || v === undefined || (v && v.length === 0) ) ? a : (a.push(v), a), []);
        } else {
            return v;
        }
    }

    function flatten(v) {
        let r;
        if (Array.isArray(v)) {
            r = v.reduce((a,v) => (a.push(...((v && Array.isArray(v)) ? flatten(v) : [v])), a), []);
        } else {
            r = v;
        }
        r = compact(r);
        return r;
        }
%}


rule -> rule0 rule1 rule2 rule3 rule4 rule5 rule6 rule7 rule8 rule9 rule10 
{% ([ rule0,rule1,rule2,rule3,rule4,rule5,rule6,rule7,rule8,rule9,rule10 ]) => {
    return {
        $class: "org.accordproject.satissozlesmesi.satissozlesmesi",
        contractId : "468fd39c-3e2c-4e5f-97f7-ec100ebbc0d1",
        alici : rule1,
        satici : rule3,
        progname : rule5,
        usernum : rule7,
        mahkemebolge : rule9,
    };
}
%}

ROOT -> rule0 
{% ([ rule0 ]) => {
    return {
        
        
    };
}
%}



rule0 -> "DLK BİLİŞİM TEKNOLOJİLERİ SATIŞ SÖZLEŞMESİ\n\n\n1. TARAFLAR :\n\n            1.1  " 


rule1 -> String {% id %} # alici 


rule2 -> " (Bundan sonra ALICI olarak anılacaktır)\n\n            1.2. " 


rule3 -> String {% id %} # satici 


rule4 -> "  (Bundan sonra SATICI olarak anılacaktır)\n\n2. SATILAN ÜRÜNLER:\n\nProgram: " 


rule5 -> String {% id %} # progname 


rule6 -> "          \n\nKullanıcı Sayısı: " 


rule7 -> String {% id %} # usernum 


rule8 -> " \n\n3.KONU\n\n            3.1.SATICI, bu sözleşmeyle satışı yapılan yazılımların (bilgisayar programlarının) kullanım hak ve yetkisini ALICI’ya verir.\n\n\n4. KARŞILIKLI TAAHHÜTLER:\n\n4.1.Sözleşmenin tarafları olarak hareket eden SATICI  ve ALICI aşağıda belirten hak ve yükümlülüklerini karşılıklı olarak taahhüt edip kabul ve imza etmişlerdir.\n\n            4.2 SATICI ;\n\n4.2.1.İkinci Maddede belirtilen ürünleri, ALICInın bilgisayarına yüklemek, yazılım hatalarına karşı çıkabilecek sorunlarda ekteki garanti belgesinde belirlenen koşul ve süreler içinde ücretsiz, daha sonrasında ise ücret karşılığı da olsa ALICI'ya destek sağlamak ve verilmesi zorunlu olan program eğitimini vermekle sorumludur.\n\n            4.2.2.Eğitim:\n\n4.2.2.1.ALICI, ikinci maddede belirtilen ürünler için, standart program eğitimi ya da ek eğitim taleplerinde bulunabilir. SATICI , ALICIDAN gelecek eğitim taleplerini en kısa sürede karşılamakla yükümlüdür.  Eğitim karşılıklı anlaşmaya bağlı olarak, ALICI’nın iş yerinde veya SATICI ’nın eğitim merkezinde olabilir. Eğitimin, ne zaman, ne sürede ve hangi kapsamda olacağı SATICI ve ALICI tarafından birlikte belirlenir.\n\n4.2.2.2. ALICI, çalışanların eğitiminin sürekliliğini sağlamakla sorumludur. Eğitim amaçlı olarak ALICI’nın iş yerine gelen, eğiticiye yeteri kadar zaman ayrılmaması veya geldiği halde eğitimi verememesi gibi durumlarda, eğitim çalışması yapılmış sayılır.\n\n4.2.2.3. Eğitim hizmetleri, destek sözleşmelerinde belirtilen fiyatlar ile ücretlendirilir.\n\n\n            4.3 ALICI:\n\n            4.3.1. Bu sözleşme ile kendisine tanınmış hak, sorumluluk ve yetkileri, hiç bir şekilde başka kişi veya kuruluşlara devremedez. SATICI adına ya da hesabına üçüncü bir şahısla bir işlem ya da anlaşma yapamaz. Herhangi bir taahhütte bulunamaz.\n\n            4.3.2. ALICI, hiçbir şekilde ürünleri oluşturan yazılım ve diğer belgeleri (CD, kitap, kullanım kılavuzu v.b. gibi) kiralayamaz, kopyalayamaz, ücretli ya da ücretsiz bir şekilde dağıtamaz.\n\n \n\n5. ÖDEME:\n\n5.1. İkinci maddede belirtilen ürünler, aşağıdaki ödeme tablosundaki bilgilere göre ALICI’ya satılmıştır.\n\n6. ÖDEMENİN YAPILMAMASI YA DA GECİKMESİ DURUMUNDA\n\n            6.1. Beşinci maddede belirtilen ödemelerin her hangi birisinin yapılmaması durumunda SATICI  geriye kalan tüm ödemelerin tahsilatını isteyebilir.\n\n            6.2. Beşinci Maddede belirtilen ödemelere uyulmaması durumunda SATICI ’nın garanti destek ve eğitim yükümlülükleri ödemeler tamamlanana kadar kalkar. Bu arada geçen süreler garanti ve destek srelerine eklenmez.\n\n            6.3. ALICI’nın ödemelerini geciktirmesi durumunda, gecikme süresi için, aylık % 7 gecikme faizi işletilerek ödeme miktarına eklenir.\n\n            6.4. Satışı yapılmış olan yazılımların hiçbir şekilde iadesi yapılamaz. Yazılımın kullanılmasından vazgeçilse dahi tüm ödemelerin vadesinde tamamlanması zorunludur.\n\n \n\n7. DİĞER HÜKÜMLER\n\n            7.1. SATICI , ürünlerin kullanımından kaynaklanacak hatalardan sorumlu değildir. ALICI, yazılımdaki raporların ya da verilerin hatalı olduğunu; bu verilere bakarak yanlış kararlar aldığını ve zarara uğradığını öne süremez.\n\n            7.2. SATICI , hiçbir şekilde ürünlerle birlikte depolanan bilgileri garanti etmez. Bilgilerin güvenliğini sağlamak kullanıcının sorumluluğundadır.\n\n            7.3.  SATICI , ALICInın ürünleri, yasalara aykırı biçimde kullanmasından sorumlu değildir.\n\n            7.4. Yazılım sisteminin konusuna giren yasa, yönetmelik veya diğer mevzuat, uygulama ve raporlarda değişiklik olması ya da çeşitli nedenlerle ALICI tarafından programda değişiklik ya da programa ek yapılmasının istenmesi durumunda, bu işlemlerin gerçekleştirilip gerçekleştirilmeyeceğine SATICI  karar verir.  Yapılacak değişiklik ve ekler ayrıca fiyatlandırılır.\n\n \n\n8. FESİH\n\n            8.1. Taraflar aşağıda belirtilen sebeplerin varlığında sözleşmeyi fesh etme hakkına sahiptir.\n\n            8.1.1. ALICInın SATICI ya olan borçları ile ilgili temerrüde düşmesi halinde,\n\n            8.1.2. Tarafların sözleşme hükümlerine aykırı davranması halinde,\n\n            8.1.3. ALICI’nın ticari işletmesini devretmesi halinde,\n\n            8.1.4.SATICI ’nın, ticari faaliyetlerinin T.T.K.’da belirtilen biçimlerde sona ermesi halinde.\n\n \n\n9. EKLER\n\nGaranti Belgesi\nDestek Sözleşmesi\n \n\n10. Bu sözleşmeden doğan anlaşmazlıkların çözümde " 


rule9 -> String {% id %} # mahkemebolge 


rule10 -> "  yetkilidir.\n\n \n\n11. 11 (0nbir) ana maddeden oluşan bu sözleşme aşağıda belirtilen tarihte, 2 (iki) nüsha halinde düzenlenmiş olup, taraflarca imzalanıp teslim alınmıştır.\n\n \n\n \n\n" 


confirmRequest -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.confirmRequest",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


confirmout -> String  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.confirmout",
        output : data[0],
        transactionId : data[2],
        timestamp : data[4]
    };
}
%}


satissozlesmesi -> String  __  String  __  String  __  String  __  String  __  String  __  String 

{% ( data ) => {
    return {
        $class: "org.accordproject.satissozlesmesi.satissozlesmesi",
        alici : data[0],
        satici : data[2],
        progname : data[4],
        usernum : data[6],
        mahkemebolge : data[8],
        contractId : data[10],
        parties : data[12]
    };
}
%}


AccordContractState -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordContractState",
        stateId : data[0]
    };
}
%}


AccordParty -> String 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.contract.AccordParty",
        partyId : data[0]
    };
}
%}


Request -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Request",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


Response -> String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Response",
        transactionId : data[0],
        timestamp : data[2]
    };
}
%}


PaymentObligation -> MonetaryAmount  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.PaymentObligation",
        amount : data[0],
        description : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


NotificationObligation -> String  __  String  __  String  __  String  __  String  __  DateTime:?  __  String  __  DateTime 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.NotificationObligation",
        title : data[0],
        message : data[2],
        contract : data[4],
        promisor : data[6],
        promisee : data[8],
        deadline : data[10],
        eventId : data[12],
        timestamp : data[14]
    };
}
%}


Payload -> AccordContract  __  Request  __  AccordContractState:? 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Payload",
        contract : data[0],
        request : data[2],
        state : data[4]
    };
}
%}


Success -> Response  __  AccordContractState  __  Event:+ 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Success",
        response : data[0],
        state : data[2],
        emit : data[4]
    };
}
%}


Failure -> ErrorResponse 

{% ( data ) => {
    return {
        $class: "org.accordproject.cicero.runtime.Failure",
        error : data[0]
    };
}
%}


CryptoMonetaryAmount -> Double  __  CryptoCurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.CryptoMonetaryAmount",
        doubleValue : data[0],
        cryptoCurrencyCode : data[2]
    };
}
%}


CryptoCurrencyCode -> "ADA" {% id %} | "BCH" {% id %} | "BTC" {% id %} | "DASH" {% id %} | "EOS" {% id %} | "ETC" {% id %} | "ETH" {% id %} | "LTC" {% id %} | "NEO" {% id %} | "XLM" {% id %} | "XMR" {% id %} | "XRP" {% id %} | "ZEC" {% id %} 


MonetaryAmount -> Double  __  CurrencyCode 

{% ( data ) => {
    return {
        $class: "org.accordproject.money.MonetaryAmount",
        doubleValue : data[0],
        currencyCode : data[2]
    };
}
%}


CurrencyCode -> "AED" {% id %} | "AFN" {% id %} | "ALL" {% id %} | "AMD" {% id %} | "ANG" {% id %} | "AOA" {% id %} | "ARS" {% id %} | "AUD" {% id %} | "AWG" {% id %} | "AZN" {% id %} | "BAM" {% id %} | "BBD" {% id %} | "BDT" {% id %} | "BGN" {% id %} | "BHD" {% id %} | "BIF" {% id %} | "BMD" {% id %} | "BND" {% id %} | "BOB" {% id %} | "BOV" {% id %} | "BRL" {% id %} | "BSD" {% id %} | "BTN" {% id %} | "BWP" {% id %} | "BYN" {% id %} | "BZD" {% id %} | "CAD" {% id %} | "CDF" {% id %} | "CHE" {% id %} | "CHF" {% id %} | "CHW" {% id %} | "CLF" {% id %} | "CLP" {% id %} | "CNY" {% id %} | "COP" {% id %} | "COU" {% id %} | "CRC" {% id %} | "CUC" {% id %} | "CUP" {% id %} | "CVE" {% id %} | "CZK" {% id %} | "DJF" {% id %} | "DKK" {% id %} | "DOP" {% id %} | "DZD" {% id %} | "EGP" {% id %} | "ERN" {% id %} | "ETB" {% id %} | "EUR" {% id %} | "FJD" {% id %} | "FKP" {% id %} | "GBP" {% id %} | "GEL" {% id %} | "GHS" {% id %} | "GIP" {% id %} | "GMD" {% id %} | "GNF" {% id %} | "GTQ" {% id %} | "GYD" {% id %} | "HKD" {% id %} | "HNL" {% id %} | "HRK" {% id %} | "HTG" {% id %} | "HUF" {% id %} | "IDR" {% id %} | "ILS" {% id %} | "INR" {% id %} | "IQD" {% id %} | "IRR" {% id %} | "ISK" {% id %} | "JMD" {% id %} | "JOD" {% id %} | "JPY" {% id %} | "KES" {% id %} | "KGS" {% id %} | "KHR" {% id %} | "KMF" {% id %} | "KPW" {% id %} | "KRW" {% id %} | "KWD" {% id %} | "KYD" {% id %} | "KZT" {% id %} | "LAK" {% id %} | "LBP" {% id %} | "LKR" {% id %} | "LRD" {% id %} | "LSL" {% id %} | "LYD" {% id %} | "MAD" {% id %} | "MDL" {% id %} | "MGA" {% id %} | "MKD" {% id %} | "MMK" {% id %} | "MNT" {% id %} | "MOP" {% id %} | "MRU" {% id %} | "MUR" {% id %} | "MVR" {% id %} | "MWK" {% id %} | "MXN" {% id %} | "MXV" {% id %} | "MYR" {% id %} | "MZN" {% id %} | "NAD" {% id %} | "NGN" {% id %} | "NIO" {% id %} | "NOK" {% id %} | "NPR" {% id %} | "NZD" {% id %} | "OMR" {% id %} | "PAB" {% id %} | "PEN" {% id %} | "PGK" {% id %} | "PHP" {% id %} | "PKR" {% id %} | "PLN" {% id %} | "PYG" {% id %} | "QAR" {% id %} | "RON" {% id %} | "RSD" {% id %} | "RUB" {% id %} | "RWF" {% id %} | "SAR" {% id %} | "SBD" {% id %} | "SCR" {% id %} | "SDG" {% id %} | "SEK" {% id %} | "SGD" {% id %} | "SHP" {% id %} | "SLL" {% id %} | "SOS" {% id %} | "SRD" {% id %} | "SSP" {% id %} | "STN" {% id %} | "SVC" {% id %} | "SYP" {% id %} | "SZL" {% id %} | "THB" {% id %} | "TJS" {% id %} | "TMT" {% id %} | "TND" {% id %} | "TOP" {% id %} | "TRY" {% id %} | "TTD" {% id %} | "TWD" {% id %} | "TZS" {% id %} | "UAH" {% id %} | "UGX" {% id %} | "USD" {% id %} | "USN" {% id %} | "UYI" {% id %} | "UYU" {% id %} | "UZS" {% id %} | "VEF" {% id %} | "VND" {% id %} | "VUV" {% id %} | "WST" {% id %} | "XAF" {% id %} | "XAG" {% id %} | "XAU" {% id %} | "XBA" {% id %} | "XBB" {% id %} | "XBC" {% id %} | "XBD" {% id %} | "XCD" {% id %} | "XDR" {% id %} | "XOF" {% id %} | "XPD" {% id %} | "XPF" {% id %} | "XPT" {% id %} | "XSU" {% id %} | "XTS" {% id %} | "XUA" {% id %} | "XXX" {% id %} | "YER" {% id %} | "ZAR" {% id %} | "ZMW" {% id %} | "ZWL" {% id %} 



# Basic types
NUMBER -> [0-9] 
{% (d) => {return parseInt(d[0]);}%}

DOUBLE_NUMBER -> NUMBER NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

MONTH -> DOUBLE_NUMBER
DAY -> DOUBLE_NUMBER
YEAR -> DOUBLE_NUMBER DOUBLE_NUMBER
{% (d) => {return '' + d[0] + d[1]}%}

DATE -> MONTH "/" DAY "/" YEAR
{% (d) => {return '' + d[4] + '-' + d[0] + '-' + d[2]}%}

Word -> [\S]:*
{% (d) => {return d[0].join('');}%}

BRACKET_PHRASE -> "[" Word (__ Word):* "]" {% ((d) => {return d[1] + ' ' + flatten(d[2]).join(" ");}) %}

String -> dqstring {% id %}
Double -> decimal {% id %}
Integer -> int {% id %}
Long -> int {% id %}
Boolean -> "true" {% id %} | "false" {% id %}
DateTime -> DATE  {% id %}
12:55:28 - [34mdebug[39m: fromDirectory
12:55:28 - [34mdebug[39m: fromDirectory
12:55:28 - [34mdebug[39m: Result of parsing: {"$class":"org.accordproject.satissozlesmesi.satissozlesmesi","contractId":"468fd39c-3e2c-4e5f-97f7-ec100ebbc0d1","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
12:55:28 - [34mdebug[39m: Setting clause data: {"$class":"org.accordproject.satissozlesmesi.satissozlesmesi","contractId":"468fd39c-3e2c-4e5f-97f7-ec100ebbc0d1","alici":"umut","satici":"serkan","progname":"prog","usernum":"2","mahkemebolge":"ankara"}
12:55:28 - [34mdebug[39m: Engine processing request org.accordproject.satissozlesmesi.confirmRequest with state org.accordproject.cicero.contract.AccordContractState
12:55:28 - [34mdebug[39m: 
        __dispatch(contract,data,request,state,moment());

        function __dispatch(contract,data,request,state,now) {
            switch(request.getFullyQualifiedType()) {
        
            case 'org.example.satissozlesmesi.confirmRequest':
                let type0 = 'org.example.satissozlesmesi.confirmout';
                let ns0 = type0.substr(0, type0.lastIndexOf('.'));
                let clazz0 = type0.substr(type0.lastIndexOf('.')+1);
                let response0 = factory.newTransaction(ns0, clazz0);
                let context0 = {request: request, state: state, contract: contract, data: data, response: response0, emit: [], now: now};
                satissozlesmesi_satissozlesmesi(context0);
                return { response: context0.response, state: context0.state, emit: context0.emit };
            break;
            default:
                throw new Error('No function handler for ' + request.getFullyQualifiedType() );
            } // switch
            return 'oops';
        }
        
12:55:28 - [34mdebug[39m: 
        __init(contract,data,request,moment());

        function __init(contract,data,request,now) {
        
                return { response: serializer.fromJSON({ '$class': 'org.accordproject.cicero.runtime.Response' }, {validate: false, acceptResourcesForRelationships: true}), state: serializer.fromJSON({ '$class': 'org.accordproject.cicero.contract.AccordContractState', 'stateId' : 'org.accordproject.cicero.contract.AccordContractState#1' }, {validate: false, acceptResourcesForRelationships: true}), emit: [] };
        }
        
12:55:28 - [31merror[39m: No function handler for org.accordproject.satissozlesmesi.confirmRequest
Error: No function handler for org.accordproject.satissozlesmesi.confirmRequest
    at __dispatch (vm.js:759:23)
    at vm.js:744:9
    at ContextifyScript.Script.runInContext (vm.js:59:29)
    at VM.run (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/vm2/lib/main.js:211:72)
    at Engine.execute (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/node_modules/@accordproject/cicero-engine/lib/engine.js:239:27)
    at Template.fromDirectory.then (/Users/umtyzc/.nvm/versions/node/v8.9.4/lib/node_modules/@accordproject/cicero-cli/lib/commands.js:151:45)
    at <anonymous>
    at process._tickCallback (internal/process/next_tick.js:188:7)
12:55:28 - [32minfo[39m: undefined
